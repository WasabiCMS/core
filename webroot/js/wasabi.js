/*!

 handlebars v2.0.0

Copyright (C) 2011-2014 by Yehuda Katz

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

@license
*/

//     Underscore.js 1.3.3
//     (c) 2009-2012 Jeremy Ashkenas, DocumentCloud Inc.
//     Underscore is freely distributable under the MIT license.
//     Portions of Underscore are inspired or borrowed from Prototype,
//     Oliver Steele's Functional, and John Resig's Micro-Templating.
//     For all details and documentation:
//     http://documentcloud.github.com/underscore

/**
 * @license Handlebars hbs 2.0.0 - Alex Sexton, but Handlebars has its own licensing junk
 *
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/require-cs for details on the plugin this was based off of
 */

/*!
 * jQuery Color Animations v@VERSION
 * https://github.com/jquery/jquery-color
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * Date: @DATE
 */

define("common/BaseViewFactory",["require","underscore"],function(t){var e=t("underscore"),n=function(t){this.eventBus=t,this.registry={factory:this}};return n.prototype=e.extend({},{register:function(t,e){return this.registry[t]=e,this.registry[t]},create:function(t,n){var i,s;return n=n||{},s=e.extend(n,this.registry,{eventBus:this.eventBus}),i=t,i.prototype.eventBus=this.eventBus,new i(s)}}),n}),define("wasabi",["require","jquery","underscore","backbone","./common/BaseViewFactory","bootstrap.dropdown"],function(t){var e=t("jquery"),n=t("underscore"),i=t("backbone"),s=t("./common/BaseViewFactory");t("bootstrap.dropdown");var r=n.extend({},i.Events),o=new s(r),a=0,l="undefined";if(typeof window.WS!==l)return window.WS;var u={features:{},modules:{registered:[]},views:[],eventBus:r,viewFactory:o,boot:function(){function i(e){var n=e.name,i=e.require,r=e.options;t([i],function(t){s.modules[n]=t,s.modules[n].initialize(r)})}for(var s=this,r=0,o=this.modules.registered.length;o>r;r++)i(this.modules.registered[r]);e(window).on("resize",function(){clearTimeout(a),a=setTimeout(n.bind(function(){this.eventBus.trigger("window.resize")},this),100)})},registerModule:function(t,e){this.modules.registered.push({name:t,require:t,options:e||{}})},get:function(t){return this.modules[t]?this.modules[t]:void console.debug('module "'+t+" is not registered.")},createView:function(t,e){return this.viewFactory.create(t,e||{})},createViews:function(t,e,i){var s=[];return t.length>0&&t.each(function(t,r){s.push(u.createView(e,n.extend({el:r},i||{})))}),s}};return window.WS=u,u}),define("core/views/Menu",["require","jquery","common/BaseView","wasabi"],function(t){var e=t("jquery"),n=t("common/BaseView"),i=(t("wasabi"),{collapsedClass:"collapsed",openClass:"open",popoutClass:"popout"}),s=function(t,n){var i=e(t.target);return i.is("li")?i:(n=n||"",i.closest("li"+n))};return n.extend({el:"#backend-menu > ul",events:function(){var t={"click > li:has(ul) > a":"onMainItemClick"};return this.isCollapsed&&(t=e.extend(t,{"mouseenter > li":"onMainItemMouseenter","mouseleave > li":"onMainItemMouseleave"})),t},globalEvents:{"window.resize":"collapseMenu"},isCollapsed:!1,options:{},initialize:function(t){this.options=e.extend({},i,t),this.$("> li").filter(".active").prev().addClass("prev-active"),this.collapseMenu()},collapseMenu:function(){var t=this.isCollapsed;this.isCollapsed="none"===this.$("> li > a > .item-name").first().css("display"),this.isCollapsed?(this.$el.addClass(this.options.collapsedClass),this.isCollapsed!==t&&this.delegateEvents(this.events())):(this.$el.removeClass(this.options.collapsedClass),this.delegateEvents(this.events()))},onMainItemClick:function(t){s(t).toggleClass(this.options.openClass)},onMainItemMouseenter:function(t){this.isCollapsed&&s(t).addClass(this.options.popoutClass)},onMainItemMouseleave:function(t){this.isCollapsed&&s(t,"."+this.options.popoutClass).removeClass(this.options.popoutClass)},onResize:function(){clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(_.bind(this.collapseMenu,this),100)}})}),define("core/views/NavigationToggle",["require","jquery","common/BaseView"],function(t){var e=t("jquery"),n=t("common/BaseView"),i=e("body"),s={navClosedClass:"nav-closed"};return n.extend({el:"body > header .toggle-nav",events:{click:"toggleNav"},isClosed:!1,options:{},initialize:function(t){this.options=e.extend({},s,t),this.isClosed=i.hasClass(this.options.navClosedClass)},toggleNav:function(){this.closed?(i.removeClass(this.options.navClosedClass),this.closed=!1):(i.addClass(this.options.navClosedClass),this.closed=!0)}})}),define("core/views/LangSwitch",["require","underscore","common/BaseView"],function(t){var e=t("underscore"),n=t("common/BaseView");return n.extend({el:".lang-switch",globalEvents:{"wasabi-core--languages-sort":"updateLanguageLinkPositions"},updateLanguageLinkPositions:function(t,n){var i=n.frontendLanguages,s=[],r=this.$("li");e.each(i,function(t){s.push(r.filter('[data-language-id="'+t.id+'"]'))}),this.$el.html(s)}})}),define("core/views/Pagination",["require","jquery","common/BaseView","purl"],function(t){var e=t("jquery"),n=t("common/BaseView"),i=t("purl");return n.extend({el:".pagination",events:{"change .limit":"onChangeLimit"},onChangeLimit:function(t){var n=e(t.target),s=n.val(),r=n.attr("data-url"),o=i(window.location),a=n.attr("name").split("data[").join("").split("]").join(""),l=o.data.param.query;l[a]=s.toString();var u="",c=[];for(var h in l)l.hasOwnProperty(h)&&c.push(h+"="+l[h]);u=c.join("&"),""!==u&&(u="?"+u),window.location=r+u}})}),function(t,e){"function"==typeof define&&define.amd?define("hbs/handlebars",[],e):"object"==typeof exports?module.exports=e():t.Handlebars=t.Handlebars||e()}(this,function(){var t=function(){"use strict";function t(t){this.string=t}var e;return t.prototype.toString=function(){return""+this.string},e=t}(),e=function(t){"use strict";function e(t){return l[t]}function n(t){for(var e=1;e<arguments.length;e++)for(var n in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],n)&&(t[n]=arguments[e][n]);return t}function i(t){return t instanceof a?t.toString():null==t?"":t?(t=""+t,c.test(t)?t.replace(u,e):t):t+""}function s(t){return t||0===t?f(t)&&0===t.length?!0:!1:!0}function r(t,e){return(t?t+".":"")+e}var o={},a=t,l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},u=/[&<>"'`]/g,c=/[&<>"'`]/;o.extend=n;var h=Object.prototype.toString;o.toString=h;var p=function(t){return"function"==typeof t};p(/x/)&&(p=function(t){return"function"==typeof t&&"[object Function]"===h.call(t)});var p;o.isFunction=p;var f=Array.isArray||function(t){return t&&"object"==typeof t?"[object Array]"===h.call(t):!1};return o.isArray=f,o.escapeExpression=i,o.isEmpty=s,o.appendContextPath=r,o}(t),n=function(){"use strict";function t(t,e){var i;e&&e.firstLine&&(i=e.firstLine,t+=" - "+i+":"+e.firstColumn);for(var s=Error.prototype.constructor.call(this,t),r=0;r<n.length;r++)this[n[r]]=s[n[r]];i&&(this.lineNumber=i,this.column=e.firstColumn)}var e,n=["description","fileName","lineNumber","message","name","number","stack"];return t.prototype=new Error,e=t}(),i=function(t,e){"use strict";function n(t,e){this.helpers=t||{},this.partials=e||{},i(this)}function i(t){t.registerHelper("helperMissing",function(){if(1===arguments.length)return void 0;throw new o("Missing helper: '"+arguments[arguments.length-1].name+"'")}),t.registerHelper("blockHelperMissing",function(e,n){var i=n.inverse,s=n.fn;if(e===!0)return s(this);if(e===!1||null==e)return i(this);if(c(e))return e.length>0?(n.ids&&(n.ids=[n.name]),t.helpers.each(e,n)):i(this);if(n.data&&n.ids){var o=g(n.data);o.contextPath=r.appendContextPath(n.data.contextPath,n.name),n={data:o}}return s(e,n)}),t.registerHelper("each",function(t,e){if(!e)throw new o("Must pass iterator to #each");var n,i,s=e.fn,a=e.inverse,l=0,u="";if(e.data&&e.ids&&(i=r.appendContextPath(e.data.contextPath,e.ids[0])+"."),h(t)&&(t=t.call(this)),e.data&&(n=g(e.data)),t&&"object"==typeof t)if(c(t))for(var p=t.length;p>l;l++)n&&(n.index=l,n.first=0===l,n.last=l===t.length-1,i&&(n.contextPath=i+l)),u+=s(t[l],{data:n});else for(var f in t)t.hasOwnProperty(f)&&(n&&(n.key=f,n.index=l,n.first=0===l,i&&(n.contextPath=i+f)),u+=s(t[f],{data:n}),l++);return 0===l&&(u=a(this)),u}),t.registerHelper("if",function(t,e){return h(t)&&(t=t.call(this)),!e.hash.includeZero&&!t||r.isEmpty(t)?e.inverse(this):e.fn(this)}),t.registerHelper("unless",function(e,n){return t.helpers["if"].call(this,e,{fn:n.inverse,inverse:n.fn,hash:n.hash})}),t.registerHelper("with",function(t,e){h(t)&&(t=t.call(this));var n=e.fn;if(r.isEmpty(t))return e.inverse(this);if(e.data&&e.ids){var i=g(e.data);i.contextPath=r.appendContextPath(e.data.contextPath,e.ids[0]),e={data:i}}return n(t,e)}),t.registerHelper("log",function(e,n){var i=n.data&&null!=n.data.level?parseInt(n.data.level,10):1;t.log(i,e)}),t.registerHelper("lookup",function(t,e){return t&&t[e]})}var s={},r=t,o=e,a="2.0.0";s.VERSION=a;var l=6;s.COMPILER_REVISION=l;var u={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1"};s.REVISION_CHANGES=u;var c=r.isArray,h=r.isFunction,p=r.toString,f="[object Object]";s.HandlebarsEnvironment=n,n.prototype={constructor:n,logger:d,log:m,registerHelper:function(t,e){if(p.call(t)===f){if(e)throw new o("Arg not supported with multiple helpers");r.extend(this.helpers,t)}else this.helpers[t]=e},unregisterHelper:function(t){delete this.helpers[t]},registerPartial:function(t,e){p.call(t)===f?r.extend(this.partials,t):this.partials[t]=e},unregisterPartial:function(t){delete this.partials[t]}};var d={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(t,e){if(d.level<=t){var n=d.methodMap[t];"undefined"!=typeof console&&console[n]&&console[n].call(console,e)}}};s.logger=d;var m=d.log;s.log=m;var g=function(t){var e=r.extend({},t);return e._parent=t,e};return s.createFrame=g,s}(e,n),s=function(t,e,n){"use strict";function i(t){var e=t&&t[0]||1,n=p;if(e!==n){if(n>e){var i=f[n],s=f[e];throw new h("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+i+") or downgrade your runtime to an older version ("+s+").")}throw new h("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+t[1]+").")}}function s(t,e){if(!e)throw new h("No environment passed to template");if(!t||!t.main)throw new h("Unknown template object: "+typeof t);e.VM.checkRevision(t.compiler);var n=function(n,i,s,r,o,a,l,u,p){o&&(r=c.extend({},r,o));var f=e.VM.invokePartial.call(this,n,s,r,a,l,u,p);if(null==f&&e.compile){var d={helpers:a,partials:l,data:u,depths:p};l[s]=e.compile(n,{data:void 0!==u,compat:t.compat},e),f=l[s](r,d)}if(null!=f){if(i){for(var m=f.split("\n"),g=0,v=m.length;v>g&&(m[g]||g+1!==v);g++)m[g]=i+m[g];f=m.join("\n")}return f}throw new h("The partial "+s+" could not be compiled when running in runtime-only mode")},i={lookup:function(t,e){for(var n=t.length,i=0;n>i;i++)if(t[i]&&null!=t[i][e])return t[i][e]},lambda:function(t,e){return"function"==typeof t?t.call(e):t},escapeExpression:c.escapeExpression,invokePartial:n,fn:function(e){return t[e]},programs:[],program:function(t,e,n){var i=this.programs[t],s=this.fn(t);return e||n?i=r(this,t,s,e,n):i||(i=this.programs[t]=r(this,t,s)),i},data:function(t,e){for(;t&&e--;)t=t._parent;return t},merge:function(t,e){var n=t||e;return t&&e&&t!==e&&(n=c.extend({},e,t)),n},noop:e.VM.noop,compilerInfo:t.compiler},s=function(e,n){n=n||{};var r=n.data;s._setup(n),!n.partial&&t.useData&&(r=l(e,r));var o;return t.useDepths&&(o=n.depths?[e].concat(n.depths):[e]),t.main.call(i,e,i.helpers,i.partials,r,o)};return s.isTop=!0,s._setup=function(n){n.partial?(i.helpers=n.helpers,i.partials=n.partials):(i.helpers=i.merge(n.helpers,e.helpers),t.usePartial&&(i.partials=i.merge(n.partials,e.partials)))},s._child=function(e,n,s){if(t.useDepths&&!s)throw new h("must pass parent depths");return r(i,e,t[e],n,s)},s}function r(t,e,n,i,s){var r=function(e,r){return r=r||{},n.call(t,e,t.helpers,t.partials,r.data||i,s&&[e].concat(s))};return r.program=e,r.depth=s?s.length:0,r}function o(t,e,n,i,s,r,o){var a={partial:!0,helpers:i,partials:s,data:r,depths:o};if(void 0===t)throw new h("The partial "+e+" could not be found");return t instanceof Function?t(n,a):void 0}function a(){return""}function l(t,e){return e&&"root"in e||(e=e?d(e):{},e.root=t),e}var u={},c=t,h=e,p=n.COMPILER_REVISION,f=n.REVISION_CHANGES,d=n.createFrame;return u.checkRevision=i,u.template=s,u.program=r,u.invokePartial=o,u.noop=a,u}(e,n,i),r=function(t,e,n,i,s){"use strict";var r,o=t,a=e,l=n,u=i,c=s,h=function(){var t=new o.HandlebarsEnvironment;return u.extend(t,o),t.SafeString=a,t.Exception=l,t.Utils=u,t.escapeExpression=u.escapeExpression,t.VM=c,t.template=function(e){return c.template(e,t)},t},p=h();return p.create=h,p["default"]=p,r=p}(i,t,n,e,s),o=function(t){"use strict";function e(t){t=t||{},this.firstLine=t.first_line,this.firstColumn=t.first_column,this.lastColumn=t.last_column,this.lastLine=t.last_line}var n,i=t,s={ProgramNode:function(t,n,i){e.call(this,i),this.type="program",this.statements=t,this.strip=n},MustacheNode:function(t,n,i,r,o){if(e.call(this,o),this.type="mustache",this.strip=r,null!=i&&i.charAt){var a=i.charAt(3)||i.charAt(2);this.escaped="{"!==a&&"&"!==a}else this.escaped=!!i;this.sexpr=t instanceof s.SexprNode?t:new s.SexprNode(t,n),this.id=this.sexpr.id,this.params=this.sexpr.params,this.hash=this.sexpr.hash,this.eligibleHelper=this.sexpr.eligibleHelper,this.isHelper=this.sexpr.isHelper},SexprNode:function(t,n,i){e.call(this,i),this.type="sexpr",this.hash=n;var s=this.id=t[0],r=this.params=t.slice(1);this.isHelper=!(!r.length&&!n),this.eligibleHelper=this.isHelper||s.isSimple},PartialNode:function(t,n,i,s,r){e.call(this,r),this.type="partial",this.partialName=t,this.context=n,this.hash=i,this.strip=s,this.strip.inlineStandalone=!0},BlockNode:function(t,n,i,s,r){e.call(this,r),this.type="block",this.mustache=t,this.program=n,this.inverse=i,this.strip=s,i&&!n&&(this.isInverse=!0)},RawBlockNode:function(t,n,r,o){if(e.call(this,o),t.sexpr.id.original!==r)throw new i(t.sexpr.id.original+" doesn't match "+r,this);n=new s.ContentNode(n,o),this.type="block",this.mustache=t,this.program=new s.ProgramNode([n],{},o)},ContentNode:function(t,n){e.call(this,n),this.type="content",this.original=this.string=t},HashNode:function(t,n){e.call(this,n),this.type="hash",this.pairs=t},IdNode:function(t,n){e.call(this,n),this.type="ID";for(var s="",r=[],o=0,a="",l=0,u=t.length;u>l;l++){var c=t[l].part;if(s+=(t[l].separator||"")+c,".."===c||"."===c||"this"===c){if(r.length>0)throw new i("Invalid path: "+s,this);".."===c?(o++,a+="../"):this.isScoped=!0}else r.push(c)}this.original=s,this.parts=r,this.string=r.join("."),this.depth=o,this.idName=a+this.string,this.isSimple=1===t.length&&!this.isScoped&&0===o,this.stringModeValue=this.string},PartialNameNode:function(t,n){e.call(this,n),this.type="PARTIAL_NAME",this.name=t.original},DataNode:function(t,n){e.call(this,n),this.type="DATA",this.id=t,this.stringModeValue=t.stringModeValue,this.idName="@"+t.stringModeValue},StringNode:function(t,n){e.call(this,n),this.type="STRING",this.original=this.string=this.stringModeValue=t},NumberNode:function(t,n){e.call(this,n),this.type="NUMBER",this.original=this.number=t,this.stringModeValue=Number(t)},BooleanNode:function(t,n){e.call(this,n),this.type="BOOLEAN",this.bool=t,this.stringModeValue="true"===t},CommentNode:function(t,n){e.call(this,n),this.type="comment",this.comment=t,this.strip={inlineStandalone:!0}}};return n=s}(n),a=function(){"use strict";var t,e=function(){function t(){this.yy={}}var e={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,CONTENT:12,COMMENT:13,openRawBlock:14,END_RAW_BLOCK:15,OPEN_RAW_BLOCK:16,sexpr:17,CLOSE_RAW_BLOCK:18,openBlock:19,block_option0:20,closeBlock:21,openInverse:22,block_option1:23,OPEN_BLOCK:24,CLOSE:25,OPEN_INVERSE:26,inverseAndProgram:27,INVERSE:28,OPEN_ENDBLOCK:29,path:30,OPEN:31,OPEN_UNESCAPED:32,CLOSE_UNESCAPED:33,OPEN_PARTIAL:34,partialName:35,param:36,partial_option0:37,partial_option1:38,sexpr_repetition0:39,sexpr_option0:40,dataName:41,STRING:42,NUMBER:43,BOOLEAN:44,OPEN_SEXPR:45,CLOSE_SEXPR:46,hash:47,hash_repetition_plus0:48,hashSegment:49,ID:50,EQUALS:51,DATA:52,pathSegments:53,SEP:54,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",12:"CONTENT",13:"COMMENT",15:"END_RAW_BLOCK",16:"OPEN_RAW_BLOCK",18:"CLOSE_RAW_BLOCK",24:"OPEN_BLOCK",25:"CLOSE",26:"OPEN_INVERSE",28:"INVERSE",29:"OPEN_ENDBLOCK",31:"OPEN",32:"OPEN_UNESCAPED",33:"CLOSE_UNESCAPED",34:"OPEN_PARTIAL",42:"STRING",43:"NUMBER",44:"BOOLEAN",45:"OPEN_SEXPR",46:"CLOSE_SEXPR",50:"ID",51:"EQUALS",52:"DATA",54:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[10,3],[14,3],[9,4],[9,4],[19,3],[22,3],[27,2],[21,3],[8,3],[8,3],[11,5],[11,4],[17,3],[17,1],[36,1],[36,1],[36,1],[36,1],[36,1],[36,3],[47,1],[49,3],[35,1],[35,1],[35,1],[41,2],[30,1],[53,3],[53,1],[6,0],[6,2],[20,0],[20,1],[23,0],[23,1],[37,0],[37,1],[38,0],[38,1],[39,0],[39,2],[40,0],[40,1],[48,1],[48,2]],performAction:function(t,e,n,i,s,r){var o=r.length-1;switch(s){case 1:return i.prepareProgram(r[o-1].statements,!0),r[o-1];case 2:this.$=new i.ProgramNode(i.prepareProgram(r[o]),{},this._$);break;case 3:this.$=r[o];break;case 4:this.$=r[o];break;case 5:this.$=r[o];break;case 6:this.$=r[o];break;case 7:this.$=new i.ContentNode(r[o],this._$);break;case 8:this.$=new i.CommentNode(r[o],this._$);break;case 9:this.$=new i.RawBlockNode(r[o-2],r[o-1],r[o],this._$);break;case 10:this.$=new i.MustacheNode(r[o-1],null,"","",this._$);break;case 11:this.$=i.prepareBlock(r[o-3],r[o-2],r[o-1],r[o],!1,this._$);break;case 12:this.$=i.prepareBlock(r[o-3],r[o-2],r[o-1],r[o],!0,this._$);break;case 13:this.$=new i.MustacheNode(r[o-1],null,r[o-2],i.stripFlags(r[o-2],r[o]),this._$);break;case 14:this.$=new i.MustacheNode(r[o-1],null,r[o-2],i.stripFlags(r[o-2],r[o]),this._$);break;case 15:this.$={strip:i.stripFlags(r[o-1],r[o-1]),program:r[o]};break;case 16:this.$={path:r[o-1],strip:i.stripFlags(r[o-2],r[o])};break;case 17:this.$=new i.MustacheNode(r[o-1],null,r[o-2],i.stripFlags(r[o-2],r[o]),this._$);break;case 18:this.$=new i.MustacheNode(r[o-1],null,r[o-2],i.stripFlags(r[o-2],r[o]),this._$);break;case 19:this.$=new i.PartialNode(r[o-3],r[o-2],r[o-1],i.stripFlags(r[o-4],r[o]),this._$);break;case 20:this.$=new i.PartialNode(r[o-2],void 0,r[o-1],i.stripFlags(r[o-3],r[o]),this._$);break;case 21:this.$=new i.SexprNode([r[o-2]].concat(r[o-1]),r[o],this._$);break;case 22:this.$=new i.SexprNode([r[o]],null,this._$);break;case 23:this.$=r[o];break;case 24:this.$=new i.StringNode(r[o],this._$);break;case 25:this.$=new i.NumberNode(r[o],this._$);break;case 26:this.$=new i.BooleanNode(r[o],this._$);break;case 27:this.$=r[o];break;case 28:r[o-1].isHelper=!0,this.$=r[o-1];break;case 29:this.$=new i.HashNode(r[o],this._$);break;case 30:this.$=[r[o-2],r[o]];break;case 31:this.$=new i.PartialNameNode(r[o],this._$);break;case 32:this.$=new i.PartialNameNode(new i.StringNode(r[o],this._$),this._$);break;case 33:this.$=new i.PartialNameNode(new i.NumberNode(r[o],this._$));break;case 34:this.$=new i.DataNode(r[o],this._$);break;case 35:this.$=new i.IdNode(r[o],this._$);break;case 36:r[o-2].push({part:r[o],separator:r[o-1]}),this.$=r[o-2];break;case 37:this.$=[{part:r[o]}];break;case 38:this.$=[];break;case 39:r[o-1].push(r[o]);break;case 48:this.$=[];break;case 49:r[o-1].push(r[o]);break;case 52:this.$=[r[o]];break;case 53:r[o-1].push(r[o])}},table:[{3:1,4:2,5:[2,38],6:3,12:[2,38],13:[2,38],16:[2,38],24:[2,38],26:[2,38],31:[2,38],32:[2,38],34:[2,38]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:[1,10],13:[1,11],14:16,16:[1,20],19:14,22:15,24:[1,18],26:[1,19],28:[2,2],29:[2,2],31:[1,12],32:[1,13],34:[1,17]},{1:[2,1]},{5:[2,39],12:[2,39],13:[2,39],16:[2,39],24:[2,39],26:[2,39],28:[2,39],29:[2,39],31:[2,39],32:[2,39],34:[2,39]},{5:[2,3],12:[2,3],13:[2,3],16:[2,3],24:[2,3],26:[2,3],28:[2,3],29:[2,3],31:[2,3],32:[2,3],34:[2,3]},{5:[2,4],12:[2,4],13:[2,4],16:[2,4],24:[2,4],26:[2,4],28:[2,4],29:[2,4],31:[2,4],32:[2,4],34:[2,4]},{5:[2,5],12:[2,5],13:[2,5],16:[2,5],24:[2,5],26:[2,5],28:[2,5],29:[2,5],31:[2,5],32:[2,5],34:[2,5]},{5:[2,6],12:[2,6],13:[2,6],16:[2,6],24:[2,6],26:[2,6],28:[2,6],29:[2,6],31:[2,6],32:[2,6],34:[2,6]},{5:[2,7],12:[2,7],13:[2,7],16:[2,7],24:[2,7],26:[2,7],28:[2,7],29:[2,7],31:[2,7],32:[2,7],34:[2,7]},{5:[2,8],12:[2,8],13:[2,8],16:[2,8],24:[2,8],26:[2,8],28:[2,8],29:[2,8],31:[2,8],32:[2,8],34:[2,8]},{17:21,30:22,41:23,50:[1,26],52:[1,25],53:24},{17:27,30:22,41:23,50:[1,26],52:[1,25],53:24},{4:28,6:3,12:[2,38],13:[2,38],16:[2,38],24:[2,38],26:[2,38],28:[2,38],29:[2,38],31:[2,38],32:[2,38],34:[2,38]},{4:29,6:3,12:[2,38],13:[2,38],16:[2,38],24:[2,38],26:[2,38],28:[2,38],29:[2,38],31:[2,38],32:[2,38],34:[2,38]},{12:[1,30]},{30:32,35:31,42:[1,33],43:[1,34],50:[1,26],53:24},{17:35,30:22,41:23,50:[1,26],52:[1,25],53:24},{17:36,30:22,41:23,50:[1,26],52:[1,25],53:24},{17:37,30:22,41:23,50:[1,26],52:[1,25],53:24},{25:[1,38]},{18:[2,48],25:[2,48],33:[2,48],39:39,42:[2,48],43:[2,48],44:[2,48],45:[2,48],46:[2,48],50:[2,48],52:[2,48]},{18:[2,22],25:[2,22],33:[2,22],46:[2,22]},{18:[2,35],25:[2,35],33:[2,35],42:[2,35],43:[2,35],44:[2,35],45:[2,35],46:[2,35],50:[2,35],52:[2,35],54:[1,40]},{30:41,50:[1,26],53:24},{18:[2,37],25:[2,37],33:[2,37],42:[2,37],43:[2,37],44:[2,37],45:[2,37],46:[2,37],50:[2,37],52:[2,37],54:[2,37]},{33:[1,42]},{20:43,27:44,28:[1,45],29:[2,40]},{23:46,27:47,28:[1,45],29:[2,42]},{15:[1,48]},{25:[2,46],30:51,36:49,38:50,41:55,42:[1,52],43:[1,53],44:[1,54],45:[1,56],47:57,48:58,49:60,50:[1,59],52:[1,25],53:24},{25:[2,31],42:[2,31],43:[2,31],44:[2,31],45:[2,31],50:[2,31],52:[2,31]},{25:[2,32],42:[2,32],43:[2,32],44:[2,32],45:[2,32],50:[2,32],52:[2,32]},{25:[2,33],42:[2,33],43:[2,33],44:[2,33],45:[2,33],50:[2,33],52:[2,33]},{25:[1,61]},{25:[1,62]},{18:[1,63]},{5:[2,17],12:[2,17],13:[2,17],16:[2,17],24:[2,17],26:[2,17],28:[2,17],29:[2,17],31:[2,17],32:[2,17],34:[2,17]},{18:[2,50],25:[2,50],30:51,33:[2,50],36:65,40:64,41:55,42:[1,52],43:[1,53],44:[1,54],45:[1,56],46:[2,50],47:66,48:58,49:60,50:[1,59],52:[1,25],53:24},{50:[1,67]},{18:[2,34],25:[2,34],33:[2,34],42:[2,34],43:[2,34],44:[2,34],45:[2,34],46:[2,34],50:[2,34],52:[2,34]},{5:[2,18],12:[2,18],13:[2,18],16:[2,18],24:[2,18],26:[2,18],28:[2,18],29:[2,18],31:[2,18],32:[2,18],34:[2,18]},{21:68,29:[1,69]},{29:[2,41]},{4:70,6:3,12:[2,38],13:[2,38],16:[2,38],24:[2,38],26:[2,38],29:[2,38],31:[2,38],32:[2,38],34:[2,38]},{21:71,29:[1,69]},{29:[2,43]},{5:[2,9],12:[2,9],13:[2,9],16:[2,9],24:[2,9],26:[2,9],28:[2,9],29:[2,9],31:[2,9],32:[2,9],34:[2,9]},{25:[2,44],37:72,47:73,48:58,49:60,50:[1,74]},{25:[1,75]},{18:[2,23],25:[2,23],33:[2,23],42:[2,23],43:[2,23],44:[2,23],45:[2,23],46:[2,23],50:[2,23],52:[2,23]},{18:[2,24],25:[2,24],33:[2,24],42:[2,24],43:[2,24],44:[2,24],45:[2,24],46:[2,24],50:[2,24],52:[2,24]},{18:[2,25],25:[2,25],33:[2,25],42:[2,25],43:[2,25],44:[2,25],45:[2,25],46:[2,25],50:[2,25],52:[2,25]},{18:[2,26],25:[2,26],33:[2,26],42:[2,26],43:[2,26],44:[2,26],45:[2,26],46:[2,26],50:[2,26],52:[2,26]},{18:[2,27],25:[2,27],33:[2,27],42:[2,27],43:[2,27],44:[2,27],45:[2,27],46:[2,27],50:[2,27],52:[2,27]},{17:76,30:22,41:23,50:[1,26],52:[1,25],53:24},{25:[2,47]},{18:[2,29],25:[2,29],33:[2,29],46:[2,29],49:77,50:[1,74]},{18:[2,37],25:[2,37],33:[2,37],42:[2,37],43:[2,37],44:[2,37],45:[2,37],46:[2,37],50:[2,37],51:[1,78],52:[2,37],54:[2,37]},{18:[2,52],25:[2,52],33:[2,52],46:[2,52],50:[2,52]},{12:[2,13],13:[2,13],16:[2,13],24:[2,13],26:[2,13],28:[2,13],29:[2,13],31:[2,13],32:[2,13],34:[2,13]},{12:[2,14],13:[2,14],16:[2,14],24:[2,14],26:[2,14],28:[2,14],29:[2,14],31:[2,14],32:[2,14],34:[2,14]},{12:[2,10]},{18:[2,21],25:[2,21],33:[2,21],46:[2,21]},{18:[2,49],25:[2,49],33:[2,49],42:[2,49],43:[2,49],44:[2,49],45:[2,49],46:[2,49],50:[2,49],52:[2,49]},{18:[2,51],25:[2,51],33:[2,51],46:[2,51]},{18:[2,36],25:[2,36],33:[2,36],42:[2,36],43:[2,36],44:[2,36],45:[2,36],46:[2,36],50:[2,36],52:[2,36],54:[2,36]},{5:[2,11],12:[2,11],13:[2,11],16:[2,11],24:[2,11],26:[2,11],28:[2,11],29:[2,11],31:[2,11],32:[2,11],34:[2,11]},{30:79,50:[1,26],53:24},{29:[2,15]},{5:[2,12],12:[2,12],13:[2,12],16:[2,12],24:[2,12],26:[2,12],28:[2,12],29:[2,12],31:[2,12],32:[2,12],34:[2,12]},{25:[1,80]},{25:[2,45]},{51:[1,78]},{5:[2,20],12:[2,20],13:[2,20],16:[2,20],24:[2,20],26:[2,20],28:[2,20],29:[2,20],31:[2,20],32:[2,20],34:[2,20]},{46:[1,81]},{18:[2,53],25:[2,53],33:[2,53],46:[2,53],50:[2,53]},{30:51,36:82,41:55,42:[1,52],43:[1,53],44:[1,54],45:[1,56],50:[1,26],52:[1,25],53:24},{25:[1,83]},{5:[2,19],12:[2,19],13:[2,19],16:[2,19],24:[2,19],26:[2,19],28:[2,19],29:[2,19],31:[2,19],32:[2,19],34:[2,19]},{18:[2,28],25:[2,28],33:[2,28],42:[2,28],43:[2,28],44:[2,28],45:[2,28],46:[2,28],50:[2,28],52:[2,28]},{18:[2,30],25:[2,30],33:[2,30],46:[2,30],50:[2,30]},{5:[2,16],12:[2,16],13:[2,16],16:[2,16],24:[2,16],26:[2,16],28:[2,16],29:[2,16],31:[2,16],32:[2,16],34:[2,16]}],defaultActions:{4:[2,1],44:[2,41],47:[2,43],57:[2,47],63:[2,10],70:[2,15],73:[2,45]},parseError:function(t){throw new Error(t)},parse:function(t){function e(){var t;return t=n.lexer.lex()||1,"number"!=typeof t&&(t=n.symbols_[t]||t),t}var n=this,i=[0],s=[null],r=[],o=this.table,a="",l=0,u=0,c=0;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var h=this.lexer.yylloc;r.push(h);var p=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var f,d,m,g,v,y,b,x,w,S={};;){if(m=i[i.length-1],this.defaultActions[m]?g=this.defaultActions[m]:((null===f||"undefined"==typeof f)&&(f=e()),g=o[m]&&o[m][f]),"undefined"==typeof g||!g.length||!g[0]){var k="";if(!c){w=[];for(y in o[m])this.terminals_[y]&&y>2&&w.push("'"+this.terminals_[y]+"'");k=this.lexer.showPosition?"Parse error on line "+(l+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+w.join(", ")+", got '"+(this.terminals_[f]||f)+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==f?"end of input":"'"+(this.terminals_[f]||f)+"'"),this.parseError(k,{text:this.lexer.match,token:this.terminals_[f]||f,line:this.lexer.yylineno,loc:h,expected:w})}}if(g[0]instanceof Array&&g.length>1)throw new Error("Parse Error: multiple actions possible at state: "+m+", token: "+f);switch(g[0]){case 1:i.push(f),s.push(this.lexer.yytext),r.push(this.lexer.yylloc),i.push(g[1]),f=null,d?(f=d,d=null):(u=this.lexer.yyleng,a=this.lexer.yytext,l=this.lexer.yylineno,h=this.lexer.yylloc,c>0&&c--);break;case 2:if(b=this.productions_[g[1]][1],S.$=s[s.length-b],S._$={first_line:r[r.length-(b||1)].first_line,last_line:r[r.length-1].last_line,first_column:r[r.length-(b||1)].first_column,last_column:r[r.length-1].last_column},p&&(S._$.range=[r[r.length-(b||1)].range[0],r[r.length-1].range[1]]),v=this.performAction.call(S,a,u,l,this.yy,g[1],s,r),"undefined"!=typeof v)return v;b&&(i=i.slice(0,-1*b*2),s=s.slice(0,-1*b),r=r.slice(0,-1*b)),i.push(this.productions_[g[1]][0]),s.push(S.$),r.push(S._$),x=o[i[i.length-2]][i[i.length-1]],i.push(x);break;case 3:return!0}}return!0}},n=function(){var t={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t){return this._input=t,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t;var e=t.match(/(?:\r\n?|\n).*/g);return e?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,n=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e-1),this.offset-=e;var i=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var s=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===i.length?this.yylloc.first_column:0)+i[i.length-n.length].length-n[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[s[0],s[0]+this.yyleng-e]),this},more:function(){return this._more=!0,this},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var t,e,n,i,s;this._more||(this.yytext="",this.match="");for(var r=this._currentRules(),o=0;o<r.length&&(n=this._input.match(this.rules[r[o]]),!n||e&&!(n[0].length>e[0].length)||(e=n,i=o,this.options.flex));o++);return e?(s=e[0].match(/(?:\r\n?|\n).*/g),s&&(this.yylineno+=s.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:s?s[s.length-1].length-s[s.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],t=this.performAction.call(this,this.yy,this,r[i],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),t?t:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return"undefined"!=typeof t?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)}};return t.options={},t.performAction=function(t,e,n,i){function s(t,n){return e.yytext=e.yytext.substr(t,e.yyleng-n)}switch(n){case 0:if("\\\\"===e.yytext.slice(-2)?(s(0,1),this.begin("mu")):"\\"===e.yytext.slice(-1)?(s(0,1),this.begin("emu")):this.begin("mu"),e.yytext)return 12;break;case 1:return 12;case 2:return this.popState(),12;case 3:return e.yytext=e.yytext.substr(5,e.yyleng-9),this.popState(),15;case 4:return 12;case 5:return s(0,4),this.popState(),13;case 6:return 45;case 7:return 46;case 8:return 16;case 9:return this.popState(),this.begin("raw"),18;case 10:return 34;case 11:return 24;case 12:return 29;case 13:return this.popState(),28;case 14:return this.popState(),28;case 15:return 26;case 16:return 26;case 17:return 32;case 18:return 31;case 19:this.popState(),this.begin("com");break;case 20:return s(3,5),this.popState(),13;case 21:return 31;case 22:return 51;case 23:return 50;case 24:return 50;case 25:return 54;case 26:break;case 27:return this.popState(),33;case 28:return this.popState(),25;case 29:return e.yytext=s(1,2).replace(/\\"/g,'"'),42;case 30:return e.yytext=s(1,2).replace(/\\'/g,"'"),42;case 31:return 52;case 32:return 44;case 33:return 44;case 34:return 43;case 35:return 50;case 36:return e.yytext=s(1,2),50;case 37:return"INVALID";case 38:return 5}},t.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]*?(?=(\{\{\{\{\/)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],t.conditions={mu:{rules:[6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[5],inclusive:!1},raw:{rules:[3,4],inclusive:!1},INITIAL:{rules:[0,1,38],inclusive:!0}},t
}();return e.lexer=n,t.prototype=e,e.Parser=t,new t}();return t=e}(),l=function(t){"use strict";function e(t,e){return{left:"~"===t.charAt(2),right:"~"===e.charAt(e.length-3)}}function n(t,e,n,i,l,c){if(t.sexpr.id.original!==i.path.original)throw new u(t.sexpr.id.original+" doesn't match "+i.path.original,t);var h=n&&n.program,p={left:t.strip.left,right:i.strip.right,openStandalone:r(e.statements),closeStandalone:s((h||e).statements)};if(t.strip.right&&o(e.statements,null,!0),h){var f=n.strip;f.left&&a(e.statements,null,!0),f.right&&o(h.statements,null,!0),i.strip.left&&a(h.statements,null,!0),s(e.statements)&&r(h.statements)&&(a(e.statements),o(h.statements))}else i.strip.left&&a(e.statements,null,!0);return l?new this.BlockNode(t,h,e,p,c):new this.BlockNode(t,e,h,p,c)}function i(t,e){for(var n=0,i=t.length;i>n;n++){var l=t[n],u=l.strip;if(u){var c=s(t,n,e,"partial"===l.type),h=r(t,n,e),p=u.openStandalone&&c,f=u.closeStandalone&&h,d=u.inlineStandalone&&c&&h;u.right&&o(t,n,!0),u.left&&a(t,n,!0),d&&(o(t,n),a(t,n)&&"partial"===l.type&&(l.indent=/([ \t]+$)/.exec(t[n-1].original)?RegExp.$1:"")),p&&(o((l.program||l.inverse).statements),a(t,n)),f&&(o(t,n),a((l.inverse||l.program).statements))}}return t}function s(t,e,n){void 0===e&&(e=t.length);var i=t[e-1],s=t[e-2];return i?"content"===i.type?(s||!n?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(i.original):void 0:n}function r(t,e,n){void 0===e&&(e=-1);var i=t[e+1],s=t[e+2];return i?"content"===i.type?(s||!n?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(i.original):void 0:n}function o(t,e,n){var i=t[null==e?0:e+1];if(i&&"content"===i.type&&(n||!i.rightStripped)){var s=i.string;i.string=i.string.replace(n?/^\s+/:/^[ \t]*\r?\n?/,""),i.rightStripped=i.string!==s}}function a(t,e,n){var i=t[null==e?t.length-1:e-1];if(i&&"content"===i.type&&(n||!i.leftStripped)){var s=i.string;return i.string=i.string.replace(n?/\s+$/:/[ \t]+$/,""),i.leftStripped=i.string!==s,i.leftStripped}}var l={},u=t;return l.stripFlags=e,l.prepareBlock=n,l.prepareProgram=i,l}(n),u=function(t,e,n,i){"use strict";function s(t){return t.constructor===a.ProgramNode?t:(o.yy=c,o.parse(t))}var r={},o=t,a=e,l=n,u=i.extend;r.parser=o;var c={};return u(c,l,a),r.parse=s,r}(a,o,l,e),c=function(t,e){"use strict";function n(){}function i(t,e,n){if(null==t||"string"!=typeof t&&t.constructor!==n.AST.ProgramNode)throw new a("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+t);e=e||{},"data"in e||(e.data=!0),e.compat&&(e.useDepths=!0);var i=n.parse(t),s=(new n.Compiler).compile(i,e);return(new n.JavaScriptCompiler).compile(s,e)}function s(t,e,n){function i(){var i=n.parse(t),s=(new n.Compiler).compile(i,e),r=(new n.JavaScriptCompiler).compile(s,e,void 0,!0);return n.template(r)}if(null==t||"string"!=typeof t&&t.constructor!==n.AST.ProgramNode)throw new a("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+t);e=e||{},"data"in e||(e.data=!0),e.compat&&(e.useDepths=!0);var s,r=function(t,e){return s||(s=i()),s.call(this,t,e)};return r._setup=function(t){return s||(s=i()),s._setup(t)},r._child=function(t,e,n){return s||(s=i()),s._child(t,e,n)},r}function r(t,e){if(t===e)return!0;if(l(t)&&l(e)&&t.length===e.length){for(var n=0;n<t.length;n++)if(!r(t[n],e[n]))return!1;return!0}}var o={},a=t,l=e.isArray,u=[].slice;return o.Compiler=n,n.prototype={compiler:n,equals:function(t){var e=this.opcodes.length;if(t.opcodes.length!==e)return!1;for(var n=0;e>n;n++){var i=this.opcodes[n],s=t.opcodes[n];if(i.opcode!==s.opcode||!r(i.args,s.args))return!1}for(e=this.children.length,n=0;e>n;n++)if(!this.children[n].equals(t.children[n]))return!1;return!0},guid:0,compile:function(t,e){this.opcodes=[],this.children=[],this.depths={list:[]},this.options=e,this.stringParams=e.stringParams,this.trackIds=e.trackIds;var n=this.options.knownHelpers;if(this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0,lookup:!0},n)for(var i in n)this.options.knownHelpers[i]=n[i];return this.accept(t)},accept:function(t){return this[t.type](t)},program:function(t){for(var e=t.statements,n=0,i=e.length;i>n;n++)this.accept(e[n]);return this.isSimple=1===i,this.depths.list=this.depths.list.sort(function(t,e){return t-e}),this},compileProgram:function(t){var e,n=(new this.compiler).compile(t,this.options),i=this.guid++;this.usePartial=this.usePartial||n.usePartial,this.children[i]=n;for(var s=0,r=n.depths.list.length;r>s;s++)e=n.depths.list[s],2>e||this.addDepth(e-1);return i},block:function(t){var e=t.mustache,n=t.program,i=t.inverse;n&&(n=this.compileProgram(n)),i&&(i=this.compileProgram(i));var s=e.sexpr,r=this.classifySexpr(s);"helper"===r?this.helperSexpr(s,n,i):"simple"===r?(this.simpleSexpr(s),this.opcode("pushProgram",n),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("blockValue",s.id.original)):(this.ambiguousSexpr(s,n,i),this.opcode("pushProgram",n),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(t){var e,n,i=t.pairs;for(this.opcode("pushHash"),e=0,n=i.length;n>e;e++)this.pushParam(i[e][1]);for(;e--;)this.opcode("assignToHash",i[e][0]);this.opcode("popHash")},partial:function(t){var e=t.partialName;this.usePartial=!0,t.hash?this.accept(t.hash):this.opcode("push","undefined"),t.context?this.accept(t.context):(this.opcode("getContext",0),this.opcode("pushContext")),this.opcode("invokePartial",e.name,t.indent||""),this.opcode("append")},content:function(t){t.string&&this.opcode("appendContent",t.string)},mustache:function(t){this.sexpr(t.sexpr),this.opcode(t.escaped&&!this.options.noEscape?"appendEscaped":"append")},ambiguousSexpr:function(t,e,n){var i=t.id,s=i.parts[0],r=null!=e||null!=n;this.opcode("getContext",i.depth),this.opcode("pushProgram",e),this.opcode("pushProgram",n),this.ID(i),this.opcode("invokeAmbiguous",s,r)},simpleSexpr:function(t){var e=t.id;"DATA"===e.type?this.DATA(e):e.parts.length?this.ID(e):(this.addDepth(e.depth),this.opcode("getContext",e.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperSexpr:function(t,e,n){var i=this.setupFullMustacheParams(t,e,n),s=t.id,r=s.parts[0];if(this.options.knownHelpers[r])this.opcode("invokeKnownHelper",i.length,r);else{if(this.options.knownHelpersOnly)throw new a("You specified knownHelpersOnly, but used the unknown helper "+r,t);s.falsy=!0,this.ID(s),this.opcode("invokeHelper",i.length,s.original,s.isSimple)}},sexpr:function(t){var e=this.classifySexpr(t);"simple"===e?this.simpleSexpr(t):"helper"===e?this.helperSexpr(t):this.ambiguousSexpr(t)},ID:function(t){this.addDepth(t.depth),this.opcode("getContext",t.depth);var e=t.parts[0];e?this.opcode("lookupOnContext",t.parts,t.falsy,t.isScoped):this.opcode("pushContext")},DATA:function(t){this.options.data=!0,this.opcode("lookupData",t.id.depth,t.id.parts)},STRING:function(t){this.opcode("pushString",t.string)},NUMBER:function(t){this.opcode("pushLiteral",t.number)},BOOLEAN:function(t){this.opcode("pushLiteral",t.bool)},comment:function(){},opcode:function(t){this.opcodes.push({opcode:t,args:u.call(arguments,1)})},addDepth:function(t){0!==t&&(this.depths[t]||(this.depths[t]=!0,this.depths.list.push(t)))},classifySexpr:function(t){var e=t.isHelper,n=t.eligibleHelper,i=this.options;if(n&&!e){var s=t.id.parts[0];i.knownHelpers[s]?e=!0:i.knownHelpersOnly&&(n=!1)}return e?"helper":n?"ambiguous":"simple"},pushParams:function(t){for(var e=0,n=t.length;n>e;e++)this.pushParam(t[e])},pushParam:function(t){this.stringParams?(t.depth&&this.addDepth(t.depth),this.opcode("getContext",t.depth||0),this.opcode("pushStringParam",t.stringModeValue,t.type),"sexpr"===t.type&&this.sexpr(t)):(this.trackIds&&this.opcode("pushId",t.type,t.idName||t.stringModeValue),this.accept(t))},setupFullMustacheParams:function(t,e,n){var i=t.params;return this.pushParams(i),this.opcode("pushProgram",e),this.opcode("pushProgram",n),t.hash?this.hash(t.hash):this.opcode("emptyHash"),i}},o.precompile=i,o.compile=s,o}(n,e),h=function(t,e){"use strict";function n(t){this.value=t}function i(){}var s,r=t.COMPILER_REVISION,o=t.REVISION_CHANGES,a=e;i.prototype={nameLookup:function(t,e){return i.isValidJavaScriptVariableName(e)?t+"."+e:t+"['"+e+"']"},depthedLookup:function(t){return this.aliases.lookup="this.lookup",'lookup(depths, "'+t+'")'},compilerInfo:function(){var t=r,e=o[t];return[t,e]},appendToBuffer:function(t){return this.environment.isSimple?"return "+t+";":{appendToBuffer:!0,content:t,toString:function(){return"buffer += "+t+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(t,e,n,i){this.environment=t,this.options=e,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!i,this.name=this.environment.name,this.isChild=!!n,this.context=n||{programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.compileChildren(t,e),this.useDepths=this.useDepths||t.depths.list.length||this.options.compat;var s,r,o,l=t.opcodes;for(r=0,o=l.length;o>r;r++)s=l[r],this[s.opcode].apply(this,s.args);if(this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new a("Compile completed with content left on stack");var u=this.createFunctionContext(i);if(this.isChild)return u;var c={compiler:this.compilerInfo(),main:u},h=this.context.programs;for(r=0,o=h.length;o>r;r++)h[r]&&(c[r]=h[r]);return this.environment.usePartial&&(c.usePartial=!0),this.options.data&&(c.useData=!0),this.useDepths&&(c.useDepths=!0),this.options.compat&&(c.compat=!0),i||(c.compiler=JSON.stringify(c.compiler),c=this.objectLiteral(c)),c},preamble:function(){this.lastContext=0,this.source=[]},createFunctionContext:function(t){var e="",n=this.stackVars.concat(this.registers.list);n.length>0&&(e+=", "+n.join(", "));for(var i in this.aliases)this.aliases.hasOwnProperty(i)&&(e+=", "+i+"="+this.aliases[i]);var s=["depth0","helpers","partials","data"];this.useDepths&&s.push("depths");var r=this.mergeSource(e);return t?(s.push(r),Function.apply(this,s)):"function("+s.join(",")+") {\n  "+r+"}"},mergeSource:function(t){for(var e,n,i="",s=!this.forceBuffer,r=0,o=this.source.length;o>r;r++){var a=this.source[r];a.appendToBuffer?e=e?e+"\n    + "+a.content:a.content:(e&&(i?i+="buffer += "+e+";\n  ":(n=!0,i=e+";\n  "),e=void 0),i+=a+"\n  ",this.environment.isSimple||(s=!1))}return s?(e||!i)&&(i+="return "+(e||'""')+";\n"):(t+=", buffer = "+(n?"":this.initializeBuffer()),i+=e?"return buffer + "+e+";\n":"return buffer;\n"),t&&(i="var "+t.substring(2)+(n?"":";\n  ")+i),i},blockValue:function(t){this.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=[this.contextName(0)];this.setupParams(t,0,e);var n=this.popStack();e.splice(1,0,n),this.push("blockHelperMissing.call("+e.join(", ")+")")},ambiguousBlockValue:function(){this.aliases.blockHelperMissing="helpers.blockHelperMissing";var t=[this.contextName(0)];this.setupParams("",0,t,!0),this.flushInline();var e=this.topStack();t.splice(1,0,e),this.pushSource("if (!"+this.lastHelper+") { "+e+" = blockHelperMissing.call("+t.join(", ")+"); }")},appendContent:function(t){this.pendingContent&&(t=this.pendingContent+t),this.pendingContent=t},append:function(){this.flushInline();var t=this.popStack();this.pushSource("if ("+t+" != null) { "+this.appendToBuffer(t)+" }"),this.environment.isSimple&&this.pushSource("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.aliases.escapeExpression="this.escapeExpression",this.pushSource(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(t){this.lastContext=t},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(t,e,n){var i=0,s=t.length;for(n||!this.options.compat||this.lastContext?this.pushContext():this.push(this.depthedLookup(t[i++]));s>i;i++)this.replaceStack(function(n){var s=this.nameLookup(n,t[i],"context");return e?" && "+s:" != null ? "+s+" : "+n})},lookupData:function(t,e){this.pushStackLiteral(t?"this.data(data, "+t+")":"data");for(var n=e.length,i=0;n>i;i++)this.replaceStack(function(t){return" && "+this.nameLookup(t,e[i],"data")})},resolvePossibleLambda:function(){this.aliases.lambda="this.lambda",this.push("lambda("+this.popStack()+", "+this.contextName(0)+")")},pushStringParam:function(t,e){this.pushContext(),this.pushString(e),"sexpr"!==e&&("string"==typeof t?this.pushString(t):this.pushStackLiteral(t))},emptyHash:function(){this.pushStackLiteral("{}"),this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}"))},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[],ids:[]}},popHash:function(){var t=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push("{"+t.ids.join(",")+"}"),this.stringParams&&(this.push("{"+t.contexts.join(",")+"}"),this.push("{"+t.types.join(",")+"}")),this.push("{\n    "+t.values.join(",\n    ")+"\n  }")},pushString:function(t){this.pushStackLiteral(this.quotedString(t))},push:function(t){return this.inlineStack.push(t),t},pushLiteral:function(t){this.pushStackLiteral(t)},pushProgram:function(t){this.pushStackLiteral(null!=t?this.programExpression(t):null)},invokeHelper:function(t,e,n){this.aliases.helperMissing="helpers.helperMissing";var i=this.popStack(),s=this.setupHelper(t,e),r=(n?s.name+" || ":"")+i+" || helperMissing";this.push("(("+r+").call("+s.callParams+"))")},invokeKnownHelper:function(t,e){var n=this.setupHelper(t,e);this.push(n.name+".call("+n.callParams+")")},invokeAmbiguous:function(t,e){this.aliases.functionType='"function"',this.aliases.helperMissing="helpers.helperMissing",this.useRegister("helper");var n=this.popStack();this.emptyHash();var i=this.setupHelper(0,t,e),s=this.lastHelper=this.nameLookup("helpers",t,"helper");this.push("((helper = (helper = "+s+" || "+n+") != null ? helper : helperMissing"+(i.paramsInit?"),("+i.paramsInit:"")+"),(typeof helper === functionType ? helper.call("+i.callParams+") : helper))")},invokePartial:function(t,e){var n=[this.nameLookup("partials",t,"partial"),"'"+e+"'","'"+t+"'",this.popStack(),this.popStack(),"helpers","partials"];this.options.data?n.push("data"):this.options.compat&&n.push("undefined"),this.options.compat&&n.push("depths"),this.push("this.invokePartial("+n.join(", ")+")")},assignToHash:function(t){var e,n,i,s=this.popStack();this.trackIds&&(i=this.popStack()),this.stringParams&&(n=this.popStack(),e=this.popStack());var r=this.hash;e&&r.contexts.push("'"+t+"': "+e),n&&r.types.push("'"+t+"': "+n),i&&r.ids.push("'"+t+"': "+i),r.values.push("'"+t+"': ("+s+")")},pushId:function(t,e){"ID"===t||"DATA"===t?this.pushString(e):this.pushStackLiteral("sexpr"===t?"true":"null")},compiler:i,compileChildren:function(t,e){for(var n,i,s=t.children,r=0,o=s.length;o>r;r++){n=s[r],i=new this.compiler;var a=this.matchExistingProgram(n);null==a?(this.context.programs.push(""),a=this.context.programs.length,n.index=a,n.name="program"+a,this.context.programs[a]=i.compile(n,e,this.context,!this.precompile),this.context.environments[a]=n,this.useDepths=this.useDepths||i.useDepths):(n.index=a,n.name="program"+a)}},matchExistingProgram:function(t){for(var e=0,n=this.context.environments.length;n>e;e++){var i=this.context.environments[e];if(i&&i.equals(t))return e}},programExpression:function(t){var e=this.environment.children[t],n=(e.depths.list,this.useDepths),i=[e.index,"data"];return n&&i.push("depths"),"this.program("+i.join(", ")+")"},useRegister:function(t){this.registers[t]||(this.registers[t]=!0,this.registers.list.push(t))},pushStackLiteral:function(t){return this.push(new n(t))},pushSource:function(t){this.pendingContent&&(this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent))),this.pendingContent=void 0),t&&this.source.push(t)},pushStack:function(t){this.flushInline();var e=this.incrStack();return this.pushSource(e+" = "+t+";"),this.compileStack.push(e),e},replaceStack:function(t){{var e,i,s,r="";this.isInline()}if(!this.isInline())throw new a("replaceStack on non-inline");var o=this.popStack(!0);if(o instanceof n)r=e=o.value,s=!0;else{i=!this.stackSlot;var l=i?this.incrStack():this.topStackName();r="("+this.push(l)+" = "+o+")",e=this.topStack()}var u=t.call(this,e);s||this.popStack(),i&&this.stackSlot--,this.push("("+r+u+")")},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var t=this.inlineStack;if(t.length){this.inlineStack=[];for(var e=0,i=t.length;i>e;e++){var s=t[e];s instanceof n?this.compileStack.push(s):this.pushStack(s)}}},isInline:function(){return this.inlineStack.length},popStack:function(t){var e=this.isInline(),i=(e?this.inlineStack:this.compileStack).pop();if(!t&&i instanceof n)return i.value;if(!e){if(!this.stackSlot)throw new a("Invalid stack pop");this.stackSlot--}return i},topStack:function(){var t=this.isInline()?this.inlineStack:this.compileStack,e=t[t.length-1];return e instanceof n?e.value:e},contextName:function(t){return this.useDepths&&t?"depths["+t+"]":"depth"+t},quotedString:function(t){return'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(this.quotedString(n)+":"+t[n]);return"{"+e.join(",")+"}"},setupHelper:function(t,e,n){var i=[],s=this.setupParams(e,t,i,n),r=this.nameLookup("helpers",e,"helper");return{params:i,paramsInit:s,name:r,callParams:[this.contextName(0)].concat(i).join(", ")}},setupOptions:function(t,e,n){var i,s,r,o={},a=[],l=[],u=[];o.name=this.quotedString(t),o.hash=this.popStack(),this.trackIds&&(o.hashIds=this.popStack()),this.stringParams&&(o.hashTypes=this.popStack(),o.hashContexts=this.popStack()),s=this.popStack(),r=this.popStack(),(r||s)&&(r||(r="this.noop"),s||(s="this.noop"),o.fn=r,o.inverse=s);for(var c=e;c--;)i=this.popStack(),n[c]=i,this.trackIds&&(u[c]=this.popStack()),this.stringParams&&(l[c]=this.popStack(),a[c]=this.popStack());return this.trackIds&&(o.ids="["+u.join(",")+"]"),this.stringParams&&(o.types="["+l.join(",")+"]",o.contexts="["+a.join(",")+"]"),this.options.data&&(o.data="data"),o},setupParams:function(t,e,n,i){var s=this.objectLiteral(this.setupOptions(t,e,n));return i?(this.useRegister("options"),n.push("options"),"options="+s):(n.push(s),"")}};for(var l="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),u=i.RESERVED_WORDS={},c=0,h=l.length;h>c;c++)u[l[c]]=!0;return i.isValidJavaScriptVariableName=function(t){return!i.RESERVED_WORDS[t]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(t)},s=i}(i,n),p=function(t,e,n,i,s){"use strict";var r,o=t,a=e,l=n.parser,u=n.parse,c=i.Compiler,h=i.compile,p=i.precompile,f=s,d=o.create,m=function(){var t=d();return t.compile=function(e,n){return h(e,n,t)},t.precompile=function(e,n){return p(e,n,t)},t.AST=a,t.Compiler=c,t.JavaScriptCompiler=f,t.Parser=l,t.parse=u,t};return o=m(),o.create=m,o["default"]=o,r=o}(r,o,u,c,h);return p}),define("hbs/underscore",[],function(){function t(e,n,i){if(e===n)return 0!==e||1/e==1/n;if(null==e||null==n)return e===n;if(e._chain&&(e=e._wrapped),n._chain&&(n=n._wrapped),e.isEqual&&w.isFunction(e.isEqual))return e.isEqual(n);if(n.isEqual&&w.isFunction(n.isEqual))return n.isEqual(e);var s=a.call(e);if(s!=a.call(n))return!1;switch(s){case"[object String]":return e==String(n);case"[object Number]":return e!=+e?n!=+n:0==e?1/e==1/n:e==+n;case"[object Date]":case"[object Boolean]":return+e==+n;case"[object RegExp]":return e.source==n.source&&e.global==n.global&&e.multiline==n.multiline&&e.ignoreCase==n.ignoreCase}if("object"!=typeof e||"object"!=typeof n)return!1;for(var r=i.length;r--;)if(i[r]==e)return!0;i.push(e);var o=0,l=!0;if("[object Array]"==s){if(o=e.length,l=o==n.length)for(;o--&&(l=o in e==o in n&&t(e[o],n[o],i)););}else{if("constructor"in e!="constructor"in n||e.constructor!=n.constructor)return!1;for(var u in e)if(w.has(e,u)&&(o++,!(l=w.has(n,u)&&t(e[u],n[u],i))))break;if(l){for(u in n)if(w.has(n,u)&&!o--)break;l=!o}}return i.pop(),l}var e={},n=Array.prototype,i=Object.prototype,s=Function.prototype,r=n.slice,o=n.unshift,a=i.toString,l=i.hasOwnProperty,u=n.forEach,c=n.map,h=n.reduce,p=n.reduceRight,f=n.filter,d=n.every,m=n.some,g=n.indexOf,v=n.lastIndexOf,y=Array.isArray,b=Object.keys,x=s.bind,w=function(t){return new M(t)};w.VERSION="1.3.3";var S=w.each=w.forEach=function(t,n,i){if(null!=t)if(u&&t.forEach===u)t.forEach(n,i);else if(t.length===+t.length){for(var s=0,r=t.length;r>s;s++)if(s in t&&n.call(i,t[s],s,t)===e)return}else for(var o in t)if(w.has(t,o)&&n.call(i,t[o],o,t)===e)return};w.map=w.collect=function(t,e,n){var i=[];return null==t?i:c&&t.map===c?t.map(e,n):(S(t,function(t,s,r){i[i.length]=e.call(n,t,s,r)}),t.length===+t.length&&(i.length=t.length),i)},w.reduce=w.foldl=w.inject=function(t,e,n,i){var s=arguments.length>2;if(null==t&&(t=[]),h&&t.reduce===h)return i&&(e=w.bind(e,i)),s?t.reduce(e,n):t.reduce(e);if(S(t,function(t,r,o){s?n=e.call(i,n,t,r,o):(n=t,s=!0)}),!s)throw new TypeError("Reduce of empty array with no initial value");return n},w.reduceRight=w.foldr=function(t,e,n,i){var s=arguments.length>2;if(null==t&&(t=[]),p&&t.reduceRight===p)return i&&(e=w.bind(e,i)),s?t.reduceRight(e,n):t.reduceRight(e);var r=w.toArray(t).reverse();return i&&!s&&(e=w.bind(e,i)),s?w.reduce(r,e,n,i):w.reduce(r,e)},w.find=w.detect=function(t,e,n){var i;return k(t,function(t,s,r){return e.call(n,t,s,r)?(i=t,!0):void 0}),i},w.filter=w.select=function(t,e,n){var i=[];return null==t?i:f&&t.filter===f?t.filter(e,n):(S(t,function(t,s,r){e.call(n,t,s,r)&&(i[i.length]=t)}),i)},w.reject=function(t,e,n){var i=[];return null==t?i:(S(t,function(t,s,r){e.call(n,t,s,r)||(i[i.length]=t)}),i)},w.every=w.all=function(t,n,i){var s=!0;return null==t?s:d&&t.every===d?t.every(n,i):(S(t,function(t,r,o){return(s=s&&n.call(i,t,r,o))?void 0:e}),!!s)};var k=w.some=w.any=function(t,n,i){n||(n=w.identity);var s=!1;return null==t?s:m&&t.some===m?t.some(n,i):(S(t,function(t,r,o){return s||(s=n.call(i,t,r,o))?e:void 0}),!!s)};w.include=w.contains=function(t,e){var n=!1;return null==t?n:g&&t.indexOf===g?-1!=t.indexOf(e):n=k(t,function(t){return t===e})},w.invoke=function(t,e){var n=r.call(arguments,2);return w.map(t,function(t){return(w.isFunction(e)?e||t:t[e]).apply(t,n)})},w.pluck=function(t,e){return w.map(t,function(t){return t[e]})},w.max=function(t,e,n){if(!e&&w.isArray(t)&&t[0]===+t[0])return Math.max.apply(Math,t);if(!e&&w.isEmpty(t))return-1/0;var i={computed:-1/0};return S(t,function(t,s,r){var o=e?e.call(n,t,s,r):t;o>=i.computed&&(i={value:t,computed:o})}),i.value},w.min=function(t,e,n){if(!e&&w.isArray(t)&&t[0]===+t[0])return Math.min.apply(Math,t);if(!e&&w.isEmpty(t))return 1/0;var i={computed:1/0};return S(t,function(t,s,r){var o=e?e.call(n,t,s,r):t;o<i.computed&&(i={value:t,computed:o})}),i.value},w.shuffle=function(t){var e,n=[];return S(t,function(t,i){e=Math.floor(Math.random()*(i+1)),n[i]=n[e],n[e]=t}),n},w.sortBy=function(t,e,n){var i=w.isFunction(e)?e:function(t){return t[e]};return w.pluck(w.map(t,function(t,e,s){return{value:t,criteria:i.call(n,t,e,s)}}).sort(function(t,e){var n=t.criteria,i=e.criteria;return void 0===n?1:void 0===i?-1:i>n?-1:n>i?1:0}),"value")},w.groupBy=function(t,e){var n={},i=w.isFunction(e)?e:function(t){return t[e]};return S(t,function(t,e){var s=i(t,e);(n[s]||(n[s]=[])).push(t)}),n},w.sortedIndex=function(t,e,n){n||(n=w.identity);for(var i=0,s=t.length;s>i;){var r=i+s>>1;n(t[r])<n(e)?i=r+1:s=r}return i},w.toArray=function(t){return t?w.isArray(t)?r.call(t):w.isArguments(t)?r.call(t):t.toArray&&w.isFunction(t.toArray)?t.toArray():w.values(t):[]},w.size=function(t){return w.isArray(t)?t.length:w.keys(t).length},w.first=w.head=w.take=function(t,e,n){return null==e||n?t[0]:r.call(t,0,e)},w.initial=function(t,e,n){return r.call(t,0,t.length-(null==e||n?1:e))},w.last=function(t,e,n){return null==e||n?t[t.length-1]:r.call(t,Math.max(t.length-e,0))},w.rest=w.tail=function(t,e,n){return r.call(t,null==e||n?1:e)},w.compact=function(t){return w.filter(t,function(t){return!!t})},w.flatten=function(t,e){return w.reduce(t,function(t,n){return w.isArray(n)?t.concat(e?n:w.flatten(n)):(t[t.length]=n,t)},[])},w.without=function(t){return w.difference(t,r.call(arguments,1))},w.uniq=w.unique=function(t,e,n){var i=n?w.map(t,n):t,s=[];return t.length<3&&(e=!0),w.reduce(i,function(n,i,r){return(e?w.last(n)===i&&n.length:w.include(n,i))||(n.push(i),s.push(t[r])),n},[]),s},w.union=function(){return w.uniq(w.flatten(arguments,!0))},w.intersection=w.intersect=function(t){var e=r.call(arguments,1);return w.filter(w.uniq(t),function(t){return w.every(e,function(e){return w.indexOf(e,t)>=0})})},w.difference=function(t){var e=w.flatten(r.call(arguments,1),!0);return w.filter(t,function(t){return!w.include(e,t)})},w.zip=function(){for(var t=r.call(arguments),e=w.max(w.pluck(t,"length")),n=new Array(e),i=0;e>i;i++)n[i]=w.pluck(t,""+i);return n},w.indexOf=function(t,e,n){if(null==t)return-1;var i,s;if(n)return i=w.sortedIndex(t,e),t[i]===e?i:-1;if(g&&t.indexOf===g)return t.indexOf(e);for(i=0,s=t.length;s>i;i++)if(i in t&&t[i]===e)return i;return-1},w.lastIndexOf=function(t,e){if(null==t)return-1;if(v&&t.lastIndexOf===v)return t.lastIndexOf(e);for(var n=t.length;n--;)if(n in t&&t[n]===e)return n;return-1},w.range=function(t,e,n){arguments.length<=1&&(e=t||0,t=0),n=arguments[2]||1;for(var i=Math.max(Math.ceil((e-t)/n),0),s=0,r=new Array(i);i>s;)r[s++]=t,t+=n;return r};var _=function(){};w.bind=function(t,e){var n,i;if(t.bind===x&&x)return x.apply(t,r.call(arguments,1));if(!w.isFunction(t))throw new TypeError;return i=r.call(arguments,2),n=function(){if(!(this instanceof n))return t.apply(e,i.concat(r.call(arguments)));_.prototype=t.prototype;var s=new _,o=t.apply(s,i.concat(r.call(arguments)));return Object(o)===o?o:s}},w.bindAll=function(t){var e=r.call(arguments,1);return 0==e.length&&(e=w.functions(t)),S(e,function(e){t[e]=w.bind(t[e],t)}),t},w.memoize=function(t,e){var n={};return e||(e=w.identity),function(){var i=e.apply(this,arguments);return w.has(n,i)?n[i]:n[i]=t.apply(this,arguments)}},w.delay=function(t,e){var n=r.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},w.defer=function(t){return w.delay.apply(w,[t,1].concat(r.call(arguments,1)))},w.throttle=function(t,e){var n,i,s,r,o,a,l=w.debounce(function(){o=r=!1},e);return function(){n=this,i=arguments;var u=function(){s=null,o&&t.apply(n,i),l()};return s||(s=setTimeout(u,e)),r?o=!0:a=t.apply(n,i),l(),r=!0,a}},w.debounce=function(t,e,n){var i;return function(){var s=this,r=arguments,o=function(){i=null,n||t.apply(s,r)};n&&!i&&t.apply(s,r),clearTimeout(i),i=setTimeout(o,e)}},w.once=function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments))}},w.wrap=function(t,e){return function(){var n=[t].concat(r.call(arguments,0));return e.apply(this,n)}},w.compose=function(){var t=arguments;return function(){for(var e=arguments,n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},w.after=function(t,e){return 0>=t?e():function(){return--t<1?e.apply(this,arguments):void 0}},w.keys=b||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var e=[];for(var n in t)w.has(t,n)&&(e[e.length]=n);return e},w.values=function(t){return w.map(t,w.identity)},w.functions=w.methods=function(t){var e=[];for(var n in t)w.isFunction(t[n])&&e.push(n);return e.sort()},w.extend=function(t){return S(r.call(arguments,1),function(e){for(var n in e)t[n]=e[n]}),t},w.pick=function(t){var e={};return S(w.flatten(r.call(arguments,1)),function(n){n in t&&(e[n]=t[n])}),e},w.defaults=function(t){return S(r.call(arguments,1),function(e){for(var n in e)null==t[n]&&(t[n]=e[n])}),t},w.clone=function(t){return w.isObject(t)?w.isArray(t)?t.slice():w.extend({},t):t},w.tap=function(t,e){return e(t),t},w.isEqual=function(e,n){return t(e,n,[])},w.isEmpty=function(t){if(null==t)return!0;if(w.isArray(t)||w.isString(t))return 0===t.length;for(var e in t)if(w.has(t,e))return!1;return!0},w.isElement=function(t){return!(!t||1!=t.nodeType)},w.isArray=y||function(t){return"[object Array]"==a.call(t)},w.isObject=function(t){return t===Object(t)},w.isArguments=function(t){return"[object Arguments]"==a.call(t)},w.isArguments(arguments)||(w.isArguments=function(t){return!(!t||!w.has(t,"callee"))}),w.isFunction=function(t){return"[object Function]"==a.call(t)},w.isString=function(t){return"[object String]"==a.call(t)},w.isNumber=function(t){return"[object Number]"==a.call(t)},w.isFinite=function(t){return w.isNumber(t)&&isFinite(t)},w.isNaN=function(t){return t!==t},w.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==a.call(t)},w.isDate=function(t){return"[object Date]"==a.call(t)},w.isRegExp=function(t){return"[object RegExp]"==a.call(t)},w.isNull=function(t){return null===t},w.isUndefined=function(t){return void 0===t},w.has=function(t,e){return l.call(t,e)},w.noConflict=function(){return root._=previousUnderscore,this},w.identity=function(t){return t},w.times=function(t,e,n){for(var i=0;t>i;i++)e.call(n,i)},w.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},w.result=function(t,e){if(null==t)return null;var n=t[e];return w.isFunction(n)?n.call(t):n},w.mixin=function(t){S(w.functions(t),function(e){I(e,w[e]=t[e])})};var N=0;w.uniqueId=function(t){var e=N++;return t?t+e:e},w.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var C=/.^/,E={"\\":"\\","'":"'",r:"\r",n:"\n",t:"	",u2028:"\u2028",u2029:"\u2029"};for(var $ in E)E[E[$]]=$;var P=/\\|'|\r|\n|\t|\u2028|\u2029/g,j=/\\(\\|'|r|n|t|u2028|u2029)/g,O=function(t){return t.replace(j,function(t,e){return E[e]})};w.template=function(t,e,n){n=w.defaults(n||{},w.templateSettings);var i="__p+='"+t.replace(P,function(t){return"\\"+E[t]}).replace(n.escape||C,function(t,e){return"'+\n_.escape("+O(e)+")+\n'"}).replace(n.interpolate||C,function(t,e){return"'+\n("+O(e)+")+\n'"}).replace(n.evaluate||C,function(t,e){return"';\n"+O(e)+"\n;__p+='"})+"';\n";n.variable||(i="with(obj||{}){\n"+i+"}\n"),i="var __p='';var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n"+i+"return __p;\n";var s=new Function(n.variable||"obj","_",i);if(e)return s(e,w);var r=function(t){return s.call(this,t,w)};return r.source="function("+(n.variable||"obj")+"){\n"+i+"}",r},w.chain=function(t){return w(t).chain()};var M=function(t){this._wrapped=t};w.prototype=M.prototype;var T=function(t,e){return e?w(t).chain():t},I=function(t,e){M.prototype[t]=function(){var t=r.call(arguments);return o.call(t,this._wrapped),T(e.apply(w,t),this._chain)}};return w.mixin(w),S(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=n[t];M.prototype[t]=function(){var n=this._wrapped;e.apply(n,arguments);var i=n.length;return"shift"!=t&&"splice"!=t||0!==i||delete n[0],T(n,this._chain)}}),S(["concat","join","slice"],function(t){var e=n[t];M.prototype[t]=function(){return T(e.apply(this._wrapped,arguments),this._chain)}}),M.prototype.chain=function(){return this._chain=!0,this},M.prototype.value=function(){return this._wrapped},w}),define("hbs/i18nprecompile",["hbs/handlebars","hbs/underscore"],function(t,e){function n(i,s,r){return r=r||{},s=s||{},i&&"program"===i.type&&i.statements&&(e(i.statements).forEach(function(e,o){var a="<!-- i18n error -->";
if("mustache"===e.type&&e.id&&"$"===e.id.original){if(e.params.length&&e.params[0].string){var l=e.params[0].string;a=s[l]||(r.originalKeyFallback?l:a)}i.statements[o]=new t.AST.ContentNode(a)}else e.program&&(e.program=n(e.program,s,r))}),i.inverse&&n(i.inverse,s,r)),i}return function(e,i,s){var r,o;return s=s||{},"data"in s||(s.data=!0),s.compat&&(s.useDepths=!0),r=t.parse(e),i!==!1&&(r=n(r,i,s)),o=(new t.Compiler).compile(r,s),(new t.JavaScriptCompiler).compile(o,s)}}),function(window){var JSON=window.JSON||{};!function(){"use strict";function f(t){return 10>t?"0"+t:t}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var n,i,s,r,o,a=gap,l=e[t];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(t)),"function"==typeof rep&&(l=rep.call(e,t,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,o=[],"[object Array]"===Object.prototype.toString.apply(l)){for(r=l.length,n=0;r>n;n+=1)o[n]=str(n,l)||"null";return s=0===o.length?"[]":gap?"[\n"+gap+o.join(",\n"+gap)+"\n"+a+"]":"["+o.join(",")+"]",gap=a,s}if(rep&&"object"==typeof rep)for(r=rep.length,n=0;r>n;n+=1)"string"==typeof rep[n]&&(i=rep[n],s=str(i,l),s&&o.push(quote(i)+(gap?": ":":")+s));else for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(s=str(i,l),s&&o.push(quote(i)+(gap?": ":":")+s));return s=0===o.length?"{}":gap?"{\n"+gap+o.join(",\n"+gap)+"\n"+a+"}":"{"+o.join(",")+"}",gap=a,s}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(t,e,n){var i;if(gap="",indent="","number"==typeof n)for(i=0;n>i;i+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(t,e){var n,i,s=t[e];if(s&&"object"==typeof s)for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(i=walk(s,n),void 0!==i?s[n]=i:delete s[n]);return reviver.call(t,e,s)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),define("hbs/json2",[],function(){return JSON})}.call(this,this),define("hbs",["hbs/handlebars","hbs/underscore","hbs/i18nprecompile","hbs/json2"],function(t,e,n,i){var s,r,o=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],a=function(){throw new Error("Environment unsupported.")},l=[],u="w+",c="hbs",h="@hbs",p="/styles/",f="/demo-build/styles/",d="templates/helpers/",m="templates/i18n/",g="screen.build.css",v="onHbsRead";t.registerHelper("$",function(){}),"undefined"!=typeof window&&window.navigator&&window.document&&!window.navigator.userAgent.match(/Node.js/)?(r=function(){var t,e,n;if("undefined"!=typeof XMLHttpRequest)return arguments[0]===!0?new XDomainRequest:new XMLHttpRequest;for(e=0;3>e;e++){n=o[e];try{t=new ActiveXObject(n)}catch(i){}if(t){o=[n];break}}if(!t)throw new Error("getXhr(): XMLHttpRequest not available");return t},getIEVersion=function(){var t=-1;if("Microsoft Internet Explorer"==navigator.appName){var e=navigator.userAgent,n=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");null!=n.exec(e)&&(t=parseFloat(RegExp.$1))}return t},a=function(t,e){var n=!1;if(0!=t.indexOf("http"))n=!1;else{var i="https"===t.substr(0,5)?8:7,s="https"===window.location.href.substr(0,5)?8:7,o=t.substr(i).split("/").shift(),a=getIEVersion();n=o!=window.location.href.substr(s).split("/").shift()&&a>=7}if(n){var l=r(!0);l.open("GET",t),l.onload=function(){e(l.responseText,t)},l.onprogress=function(){},l.ontimeout=function(){},l.onerror=function(){},setTimeout(function(){l.send()},0)}else{var u=r();u.open("GET",t,!0),u.onreadystatechange=function(){4===u.readyState&&e(u.responseText,t)},u.send(null)}}):"undefined"!=typeof process&&process.versions&&process.versions.node?(s=require.nodeRequire("fs"),a=function(t,e){var n=s.readFileSync(t,"utf8")||"";n=n.replace(/^\uFEFF/,""),e(n,t)}):"undefined"!=typeof java&&"undefined"!=typeof java.io&&(a=function(t,e){for(var n,i=new java.io.FileInputStream(t),s=new java.io.InputStreamReader(i,"UTF-8"),r=new java.io.BufferedReader(s),o="";null!==(n=r.readLine());)o+=new String(n)+"\n";r.close(),e(o,t)});var y,b={},x=function(t,e){b[t]?e(b[t]):a(t,function(t,n){b[n]=t,e.call(this,t)})},w=[],S={},k=[];return{get:function(){return t},write:function(t,e,n){if(e+h in l){var i=l[e+h];n.asModule(t+"!"+e,i)}},version:"2.0.0",load:function(s,r,o,b){function _(t,n){return e(t).forEach(function(t){t&&t.type&&"partial"===t.type&&n.push(t.partialName.name),t&&t.program&&t.program.statements&&_(t.program.statements,n),t&&t.inverse&&t.inverse.statements&&_(t.inverse.statements,n)}),n}function N(t){var n=[];return t&&t.statements&&(n=_(t.statements,[])),e.unique(n)}function C(t){var e,n,s;if(t&&t.statements&&(e=t.statements[0],e&&"comment"===e.type))try{return n=e.comment.replace(new RegExp("^[\\s]+|[\\s]+$","g"),""),s=i.parse(n),n}catch(r){return i.stringify({description:n})}return"{}"}function E(t){if(!t)return[];var e,n=[t[0]],i=t[0];for(e=1;e<t.length;++e)t.hasOwnProperty(e)&&(i+="."+t[e],n.push(i));return n}function $(n,i,s,r){s=s?s+".":"";var o="";return e(n).forEach(function(n){var a,l,u;if(n&&n.type&&"mustache"===n.type){if(!n.params||!n.params.length){a=E(n.id.parts);for(l in a)a[l]&&(o=a[l]||o,i.push(s+a[l]));i.push(s+n.id.string)}var c=["this",".","..","./..","../..","../../.."];n.params&&"undefined"==typeof t.helpers[n.id.string]&&(e(n.params).forEach(function(l){(e(c).contains(l.original)||l instanceof t.AST.StringNode||l instanceof t.AST.NumberNode||l instanceof t.AST.BooleanNode||l instanceof t.AST.DataNode||l instanceof t.AST.SexprNode)&&(r.push(n.id.string),"undefined"!=typeof n.params&&e(n.params).forEach(function(t){"sexpr"===t.type&&t.isHelper===!0&&r.push(t.id.string)}),null!=n.hash&&"undefined"!=typeof n.hash&&"undefined"!=typeof n.hash.pairs&&e(n.hash.pairs).forEach(function(t){var e=(t[0],t[1]);"sexpr"===e.type&&e.isHelper===!0&&r.push(e.id.string)})),a=E(l.parts);for(var u in a)a[u]&&(o=a[u]||o,r.push(n.id.string),i.push(s+a[u]))}),null!=n.hash&&"undefined"!=typeof n.hash&&"undefined"!=typeof n.hash.pairs&&e(n.hash.pairs).forEach(function(e){var i=e[1];(i instanceof t.AST.StringNode||i instanceof t.AST.NumberNode||i instanceof t.AST.BooleanNode||i instanceof t.AST.IdNode)&&r.push(n.id.string)}))}n&&n.mustache&&$([n.mustache],i,s+o,r),n&&n.program&&n.program.statements&&(u=$([n.mustache],[],"",r)[0]||"",n.inverse&&n.inverse.statements&&$(n.inverse.statements,i,s+o+(u?s+o?"."+u:u:""),r),$(n.program.statements,i,s+o+(u?s+o?"."+u:u:""),r))}),i}function P(t){var n=[],i=[];t&&t.statements&&(n=$(t.statements,[],void 0,i));var s=["helperMissing","blockHelperMissing","each","if","unless","with","log","lookup"];return{vars:e(n).chain().unique().map(function(t){return""===t?".":t.length&&"."===t[t.length-1]?t.substr(0,t.length-1)+"[]":t}).value(),helpers:e(i).chain().unique().map(function(t){return e(s).contains(t)?void 0:t}).compact().value()}}function j(t){for(var e=t.split("/"),n=0;n<e.length;n++)".."===e[n]?(delete e[n-1],delete e[n]):"."===e[n]&&delete e[n];return e.join("/").replace(/\/\/+/g,"/")}function O(c){a(B,function(a,h){var m,b,x,_,E,$=y.isBuild&&y[v]?y[v]:function(t,e,n){return n},O=t.parse($(s,h,a)),B=N(O),L=C(O),H=P(O),q=H.vars,R=H.helpers||[],V="",D="",F="",z=[],U=s.substr(0,s.lastIndexOf("/")+1);if(require.config.hbs=require.config.hbs||{},require.config.hbs._partials=require.config.hbs._partials||{},"{}"!==L)try{x=i.parse(L)}catch(J){console.log("couldn't parse meta for %s",h)}for(var W in B)if(B.hasOwnProperty(W)&&"string"==typeof B[W]){var h,K=B[W];h=j(K.match(/^(\.|\/)+/)?U+K:A+K),require.config.hbs._partials[h]=require.config.hbs._partials[h]||[],require.config.hbs._partials[h].references=require.config.hbs._partials[h].references||[],require.config.hbs._partials[h].references.push(K),require.config.hbs._loadedDeps=require.config.hbs._loadedDeps||{},z[W]="hbs!"+h}if(m=z.join("', '"),R=R.concat(x&&x.helpers?x.helpers:[]),b=I?"":function(){var t,e=[],n=y.hbs&&y.hbs.helperPathCallback?y.hbs.helperPathCallback:function(t){return(y.hbs&&y.hbs.helperDirectory?y.hbs.helperDirectory:d)+t};for(t=0;t<R.length;t++)e[t]="'"+n(R[t],h)+"'";return e}().join(","),b&&(b=","+b),x)try{x.styles&&(w=e.union(w,x.styles),require.isBrowser&&!y.isBuild?(_=document.head||document.getElementsByTagName("head")[0],e(x.styles).forEach(function(t){S[t]||(E=document.createElement("link"),E.href=y.baseUrl+p+t+".css",E.media="all",E.rel="stylesheet",E.type="text/css",_.appendChild(E),S[t]=E)})):y.isBuild&&!function(){var t=require.nodeRequire("fs"),n=e(x.styles).map(function(t){return S[t]?"":(S[t]=!0,"@import url("+t+".css);\n")}).join("\n");t.open(__dirname+f+g,u,"0666",function(e,i){t.writeSync(i,n,null,encoding="utf8"),t.close(i)}),u="a"}())}catch(J){console.log("error injecting styles")}y.isBuild||y.serverRender||(V="<!-- START - "+s+" -->",D="<!-- END - "+s+" -->",F="t.meta = "+L+";\nt.helpers = "+i.stringify(R)+";\nt.deps = "+i.stringify(z)+";\nt.vars = "+i.stringify(q)+";\n");var Y=T?!1:e.extend(c,y.localeMapping),G=y.hbs||{},X=e.extend(G.compileOptions||{},{originalKeyFallback:G.originalKeyFallback}),Z=n(a,Y,X),Q="'hbs!"+s+"',";m&&(m=", '"+m+"'");var te=[];require.config.hbs._partials[s]&&(te=require.config.hbs._partials[s].references),a="/* START_TEMPLATE */\ndefine("+Q+"['hbs','hbs/handlebars'"+m+b+"], function( hbs, Handlebars ){ \nvar t = Handlebars.template("+Z+");\nHandlebars.registerPartial('"+s+"', t);\n";for(var W=0;W<te.length;W++)a+="Handlebars.registerPartial('"+te[W]+"', t);\n";a+=F+"return t;\n});\n/* END_TEMPLATE */\n",y.isBuild&&(l[M]=a),y.isBuild||(a+="\r\n//# sourceURL="+h),y.isBuild?(o.fromText(s,a),r([s],function(t){o(t)})):require(z,function(){o.fromText(a),r([s],function(t){o(t)})}),y.removeCombined&&h&&k.push(h)})}y=y||b;var M=s+h;y.hbs=y.hbs||{};var T=!(1==y.hbs.i18n),I=0==y.hbs.helpers,A="";y.hbs.partialsUrl&&(A=y.hbs.partialsUrl,A.match(/\/$/)||(A+="/")),y.hbs.fetchText&&(a=y.hbs.fetchText);var B,L=y.hbs&&y.hbs.templateExtension===!1;if(B=r.toUrl(L?s:s+"."+(y.hbs&&y.hbs.templateExtension?y.hbs.templateExtension:c)),T)O(!1);else{var H=(y.hbs&&y.hbs.i18nDirectory?y.hbs.i18nDirectory:m)+(y.locale||"en_us")+".json";try{x(r.toUrl(H),function(t){O(i.parse(t))})}catch(q){if(y.hbs)throw q;console.warn("hbs: Error reading "+H+", disabling i18n. Ignore this if you're using jam, otherwise check your i18n configuration.\n"),y.hbs={i18n:!1,helpers:!0},O(!1)}}},onLayerEnd:function(){y.removeCombined&&s&&k.forEach(function(t){s.existsSync(t)&&s.unlinkSync(t)})}}}),define("hbs!common/templates/modal",["hbs","hbs/handlebars"],function(t,e){var n=e.template({1:function(t,e,n,i){var s,r,o=this.lambda,a=this.escapeExpression,l="function",u=e.helperMissing,c='            <div class="'+a(o(null!=(s=null!=t?t.cssClasses:t)?s.modalHeader:s,t))+'">\r\n                <span>';return r=null!=(r=e.modalHeader||(null!=t?t.modalHeader:t))?r:u,s=typeof r===l?r.call(t,{name:"modalHeader",hash:{},data:i}):r,null!=s&&(c+=s),c+="</span>\r\n",s=e["if"].call(t,null!=t?t.hasCloseLink:t,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),null!=s&&(c+=s),c+"            </div>\r\n"},2:function(){return'                <a href="javascript:void(0)" data-dismiss="modal"><i class="icon-delete"></i></a>\r\n'},4:function(t,e,n,i){var s,r,o=this.lambda,a=this.escapeExpression,l="function",u=e.helperMissing,c='            <div class="'+a(o(null!=(s=null!=t?t.cssClasses:t)?s.modalBody:s,t))+'">\r\n                ';return r=null!=(r=e.modalBody||(null!=t?t.modalBody:t))?r:u,s=typeof r===l?r.call(t,{name:"modalBody",hash:{},data:i}):r,null!=s&&(c+=s),c+"\r\n            </div>\r\n"},6:function(t,e,n,i){var s,r,o=this.lambda,a=this.escapeExpression,l="function",u=e.helperMissing,c='            <div class="'+a(o(null!=(s=null!=t?t.cssClasses:t)?s.modalFooter:s,t));return s=e["if"].call(t,null!=t?t.isConfirmModal:t,{name:"if",hash:{},fn:this.program(7,i),inverse:this.noop,data:i}),null!=s&&(c+=s),c+='">\r\n                <form action="'+a((r=null!=(r=e.action||(null!=t?t.action:t))?r:u,typeof r===l?r.call(t,{name:"action",hash:{},data:i}):r))+'" method="'+a((r=null!=(r=e.method||(null!=t?t.method:t))?r:u,typeof r===l?r.call(t,{name:"method",hash:{},data:i}):r))+'">\r\n',s=e["if"].call(t,null!=t?t.isConfirmModal:t,{name:"if",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=s&&(c+=s),c+"                </form>\r\n            </div>\r\n"},7:function(t){var e,n=this.lambda,i=this.escapeExpression;return" "+i(n(null!=(e=null!=t?t.cssClasses:t)?e.confirmFooter:e,t))},9:function(t,e,n,i){var s,r="function",o=e.helperMissing,a=this.escapeExpression;return'                    <button class="button" type="submit"><span>'+a((s=null!=(s=e.confirmYes||(null!=t?t.confirmYes:t))?s:o,typeof s===r?s.call(t,{name:"confirmYes",hash:{},data:i}):s))+'</span></button>\r\n                    <a href="javascript:void(0)" data-dismiss="modal">'+a((s=null!=(s=e.confirmNo||(null!=t?t.confirmNo:t))?s:o,typeof s===r?s.call(t,{name:"confirmNo",hash:{},data:i}):s))+"</a>\r\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var s,r=this.lambda,o=this.escapeExpression,a='<div class="modal-wrapper">\r\n    <div class="'+o(r(null!=(s=null!=t?t.cssClasses:t)?s.backdrop:s,t))+'"></div>\r\n    <div class="'+o(r(null!=(s=null!=t?t.cssClasses:t)?s.scrollable:s,t))+'">\r\n        <div class="'+o(r(null!=(s=null!=t?t.cssClasses:t)?s.container:s,t))+'">\r\n';return s=e["if"].call(t,null!=t?t.hasHeader:t,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=s&&(a+=s),a+="\r\n",s=e["if"].call(t,null!=t?t.hasBody:t,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=s&&(a+=s),a+="\r\n",s=e["if"].call(t,null!=t?t.hasFooter:t,{name:"if",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=s&&(a+=s),a+"        </div>\r\n    </div>\r\n</div>"},useData:!0});return e.registerPartial("common/templates/modal",n),n}),define("common/ModalView",["require","jquery","common/BaseView","common/util/eventify","hbs!common/templates/modal"],function(t){var e=t("jquery"),n=t("common/BaseView"),i=t("common/util/eventify"),s=t("hbs!common/templates/modal"),r=e("body"),o=e(document),a=e(window),l={width:400,offsetTop:200,opacity:.35,padding:20,cssClasses:{backdrop:"modal-backdrop",scrollable:"modal-scrollable",container:"modal-container",modalHeader:"modal-header",modalBody:"modal-body",modalFooter:"modal-footer",confirmFooter:"modal-confirm"},confirmYes:"Yes",confirmNo:"No",closeOnScrollable:!0,closeOnSubmit:!0};return n.extend({$backdrop:null,$container:null,$closeButtons:null,$modal:null,$notify:null,$scrollable:null,$submitButtons:null,events:{click:"openModal"},modalName:null,isConfirmModal:!1,isOpened:!1,method:null,modalSuccessEvent:null,options:{},initialize:function(t){this.options=e.extend({},l,t)},initModalOptions:function(){if(this.method=this.$el.attr("data-modal-method")||"post",this.isAjax="1"===this.$el.attr("data-modal-ajax")||"true"===this.$el.attr("data-modal-ajax"),this.action=this.$el.attr("data-modal-action")||this.$el.attr("href")||!1,this.isAjax){var t=this.$el.attr("data-modal-notify");this.$notify=void 0!==t?e(t):o,this.modalSuccessEvent=this.$el.attr("data-modal-event")||"modal:success"}var n=parseInt(this.$el.attr("data-modal-width"));n&&(this.options.width=n),"undefined"!=typeof this.$el.attr("data-modal-close-on-scrollable")&&(this.options.closeOnScrollable=parseInt(this.$el.attr("data-modal-close-on-scrollable"))),"undefined"!=typeof this.$el.attr("data-modal-close-on-submit")&&(this.options.closeOnSubmit=parseInt(this.$el.attr("data-modal-close-on-submit"))),this.options.forceCloseModalLink=parseInt(this.$el.attr("data-force-close-modal-link"))},createTemplateOptions:function(){var t,n,i={};return i.modalHeader=this.$el.attr("data-modal-header")||this.options.modalHeader,i.hasHeader=void 0!==i.modalHeader,i.modalBody=this.$el.attr("data-modal-body")||this.options.modalBody,i.hasBody=void 0!==i.modalBody,i.hasBody||(n=e(this.$el.attr("data-modal-target")),t=n.length>0,t&&(i.modalBody=n.html(),i.hasBody=!0)),i.isConfirmModal="confirm"===this.$el.attr("data-toggle"),i.isConfirmModal?i.hasFooter=!0:(i.modalFooter=this.$el.attr("data-modal-footer"),i.hasFooter=void 0!==i.modalFooter),i.action=this.action,i.method=this.method,i.cssClasses=this.options.cssClasses,i.confirmYes=this.options.confirmYes,i.confirmNo=this.options.confirmNo,i.forceCloseModalLink=this.options.forceCloseModalLink,i.hasCloseLink=!i.isConfirmModal||i.forceCloseModalLink,i},initModalElements:function(){this.$modal=e(s(this.createTemplateOptions())),this.$backdrop=this.$modal.find("."+this.options.cssClasses.backdrop),this.$backdrop.css({opacity:this.options.opacity}),this.$scrollable=this.$modal.find("."+this.options.cssClasses.scrollable),this.$container=this.$modal.find("."+this.options.cssClasses.container),this.$container.css({width:this.options.width,position:"fixed",left:-99999,top:this.options.offsetTop,opacity:0,zIndex:1e4}),this.$closeButtons=this.$modal.find('[data-dismiss="modal"]'),this.$submitButtons=this.$modal.find('button[type="submit"]')},updatePosition:function(){var t=this.$container.outerHeight(),e=this.$container.offset().top-this.$scrollable.offset().top,n=this.$scrollable.height(),i=n-t-e<this.options.offsetTop;a.height()<o.height()?r.addClass("page-overflow").addClass("fix-scroll-"+this.options.scrollbarWidth):r.removeClass("page-overflow").removeClass("fix-scroll-"+this.options.scrollbarWidth),this.$container.css(i?t+2*this.options.padding<=n?{top:"50%",marginTop:-t/2}:{top:this.options.padding,marginTop:0}:{top:this.options.offsetTop,marginTop:0}),this.$container.css({position:"absolute",marginLeft:-this.options.width/2,left:"50%"})},resetDOM:function(){r.removeClass("modal-open").removeClass("page-overflow"),this.$modal=null,this.$container=null,this.$scrollable=null,this.$backdrop=null,this.$submitButtons=[]},onResize:function(){this.isOpened&&this.updatePosition()},submit:function(t){var n=e(t.target),i=this;if(void 0===n.attr("disabled"))if(this.isAjax){t.preventDefault(),n.prop("disabled",!0),this.$notify.trigger("modal:beforeAjax");var s,r=this.$modal.find("form");r.length>0&&(s=this.$modal.find("form").serialize()),e.ajax({type:this.method,url:this.action,cache:!1,data:s,success:function(t){i.closeModal(),i.$notify.trigger(i.modalSuccessEvent,t)}})}else this.modalName&&mgu.eventBus.trigger("modal-submitted-"+this.modalName,this,t),this.options.closeOnSubmit&&this.closeModal()},openModal:function(t){if(t&&t.preventDefault(),!this.isOpened){if(this.isOpened=!0,this.initModalOptions(),this.initModalElements(),r.addClass("modal-open").append(this.$modal),this.updatePosition(),this.$container.hide().css("opacity",1).fadeIn(),this.listenTo(i(a),"resize",_.bind(this.onResize,this)),this.$closeButtons.length>1)for(var n=0,s=this.$closeButtons.length;s>n;n++)this.listenTo(i(e(this.$closeButtons[n])),"click",_.bind(this.closeModal,this));else this.listenTo(i(this.$closeButtons),"click",_.bind(this.closeModal,this));this.options.closeOnScrollable&&this.listenTo(i(this.$scrollable),"click",_.bind(this.closeModal,this)),this.$submitButtons.length&&this.listenTo(i(this.$submitButtons),"click",_.bind(this.submit,this)),this.modalName=this.$el.attr("data-modal-name"),this.modalName&&(this.$modal.attr("data-modal-name",this.modalName),mgu.eventBus.trigger("modal-opened-"+this.modalName,this))}},closeModal:function(t){if("object"==typeof t){if(t.target!==t.currentTarget&&e(t.target).parent()[0]!==t.currentTarget)return;t.preventDefault()}if(this.stopListening(i(a),"resize",_.bind(this.onResize,this)),this.$closeButtons.length>1)for(var n=0,s=this.$closeButtons.length;s>n;n++)this.stopListening(i(e(this.$closeButtons[n])),"click",_.bind(this.closeModal,this));else this.stopListening(i(this.$closeButtons),"click",_.bind(this.closeModal,this));this.options.closeOnScrollable&&this.stopListening(i(this.$scrollable),"click",_.bind(this.closeModal,this)),this.$submitButtons.length&&this.stopListening(i(this.$submitButtons),"click",_.bind(this.submit,this)),this.unblockThis(),e.when.apply(null,[this.$container.fadeOut(200),this.$backdrop.fadeOut(200)]).then(e.proxy(function(){this.$modal&&this.$modal.remove(),this.resetDOM(),this.isOpened=!1,"function"==typeof t&&t.call()},this))}})}),define("core/views/LanguagesTable",["require","jquery","common/BaseView","wasabi","jquery.tSortable"],function(t){var e=t("jquery"),n=t("common/BaseView"),i=t("wasabi");return t("jquery.tSortable"),n.extend({events:{"tSortable-change":"onSort"},initialize:function(){this.$form=this.$el.closest("form"),this.$el.tSortable({handle:"a.action-sort",placeholder:"sortable-placeholder",opacity:.8})},onSort:function(t){var n=e(t.target);n.find("tbody > tr").each(function(t){e(this).find("input.position").first().val(t)}),e.ajax({url:this.$form.attr("action"),data:this.$form.serialize(),type:"post",success:function(e){i.eventBus.trigger("wasabi-core--languages-sort",t,e)}})}})}),define("core/sections/LanguagesIndex",["require","common/BaseView","wasabi","../views/LanguagesTable"],function(t){var e=t("common/BaseView"),n=t("wasabi"),i=t("../views/LanguagesTable");return e.extend({el:".wasabi-core--languages-index",initialize:function(){n.createView(i,{el:this.$("table.languages")})}})}),define("common/SpinPresets",["require"],function(){return{small:{lines:12,length:0,width:3,radius:6},medium:{lines:9,length:4,width:2,radius:3},large:{lines:11,length:7,width:2,radius:5},mega:{lines:11,length:10,width:3,radius:8}}}),function(t,e){function n(t,e,n){var i=h[e.type]||{};return null==t?n||!e.def?null:e.def:(t=i.floor?~~t:parseFloat(t),isNaN(t)?e.def:i.mod?(t+i.mod)%i.mod:0>t?0:i.max<t?i.max:t)}function i(e){var n=u(),i=n._rgba=[];return e=e.toLowerCase(),d(l,function(t,s){var r,o=s.re.exec(e),a=o&&s.parse(o),l=s.space||"rgba";return a?(r=n[l](a),n[c[l].cache]=r[c[l].cache],i=n._rgba=r._rgba,!1):void 0}),i.length?("0,0,0,0"===i.join()&&t.extend(i,r.transparent),n):r[e]}function s(t,e,n){return n=(n+1)%1,1>6*n?t+(e-t)*n*6:1>2*n?e:2>3*n?t+(e-t)*(2/3-n)*6:t}var r,o="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",a=/^([\-+])=\s*(\d+\.?\d*)/,l=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(t){return[t[1],t[2]/100,t[3]/100,t[4]]}}],u=t.Color=function(e,n,i,s){return new t.Color.fn.parse(e,n,i,s)},c={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},h={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},p=u.support={},f=t("<p>")[0],d=t.each;f.style.cssText="background-color:rgba(1,1,1,.5)",p.rgba=f.style.backgroundColor.indexOf("rgba")>-1,d(c,function(t,e){e.cache="_"+t,e.props.alpha={idx:3,type:"percent",def:1}}),u.fn=t.extend(u.prototype,{parse:function(s,o,a,l){if(s===e)return this._rgba=[null,null,null,null],this;(s.jquery||s.nodeType)&&(s=t(s).css(o),o=e);var h=this,p=t.type(s),f=this._rgba=[];return o!==e&&(s=[s,o,a,l],p="array"),"string"===p?this.parse(i(s)||r._default):"array"===p?(d(c.rgba.props,function(t,e){f[e.idx]=n(s[e.idx],e)}),this):"object"===p?(s instanceof u?d(c,function(t,e){s[e.cache]&&(h[e.cache]=s[e.cache].slice())}):d(c,function(e,i){var r=i.cache;d(i.props,function(t,e){if(!h[r]&&i.to){if("alpha"===t||null==s[t])return;h[r]=i.to(h._rgba)}h[r][e.idx]=n(s[t],e,!0)}),h[r]&&t.inArray(null,h[r].slice(0,3))<0&&(h[r][3]=1,i.from&&(h._rgba=i.from(h[r])))}),this):void 0},is:function(t){var e=u(t),n=!0,i=this;return d(c,function(t,s){var r,o=e[s.cache];return o&&(r=i[s.cache]||s.to&&s.to(i._rgba)||[],d(s.props,function(t,e){return null!=o[e.idx]?n=o[e.idx]===r[e.idx]:void 0})),n}),n},_space:function(){var t=[],e=this;return d(c,function(n,i){e[i.cache]&&t.push(n)}),t.pop()},transition:function(t,e){var i=u(t),s=i._space(),r=c[s],o=0===this.alpha()?u("transparent"):this,a=o[r.cache]||r.to(o._rgba),l=a.slice();return i=i[r.cache],d(r.props,function(t,s){var r=s.idx,o=a[r],u=i[r],c=h[s.type]||{};null!==u&&(null===o?l[r]=u:(c.mod&&(u-o>c.mod/2?o+=c.mod:o-u>c.mod/2&&(o-=c.mod)),l[r]=n((u-o)*e+o,s)))}),this[s](l)},blend:function(e){if(1===this._rgba[3])return this;var n=this._rgba.slice(),i=n.pop(),s=u(e)._rgba;return u(t.map(n,function(t,e){return(1-i)*s[e]+i*t}))},toRgbaString:function(){var e="rgba(",n=t.map(this._rgba,function(t,e){return null==t?e>2?1:0:t});return 1===n[3]&&(n.pop(),e="rgb("),e+n.join()+")"},toHslaString:function(){var e="hsla(",n=t.map(this.hsla(),function(t,e){return null==t&&(t=e>2?1:0),e&&3>e&&(t=Math.round(100*t)+"%"),t});return 1===n[3]&&(n.pop(),e="hsl("),e+n.join()+")"},toHexString:function(e){var n=this._rgba.slice(),i=n.pop();return e&&n.push(~~(255*i)),"#"+t.map(n,function(t){return t=(t||0).toString(16),1===t.length?"0"+t:t}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),u.fn.parse.prototype=u.fn,c.hsla.to=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e,n,i=t[0]/255,s=t[1]/255,r=t[2]/255,o=t[3],a=Math.max(i,s,r),l=Math.min(i,s,r),u=a-l,c=a+l,h=.5*c;return e=l===a?0:i===a?60*(s-r)/u+360:s===a?60*(r-i)/u+120:60*(i-s)/u+240,n=0===u?0:.5>=h?u/c:u/(2-c),[Math.round(e)%360,n,h,null==o?1:o]},c.hsla.from=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e=t[0]/360,n=t[1],i=t[2],r=t[3],o=.5>=i?i*(1+n):i+n-i*n,a=2*i-o;return[Math.round(255*s(a,o,e+1/3)),Math.round(255*s(a,o,e)),Math.round(255*s(a,o,e-1/3)),r]},d(c,function(i,s){var r=s.props,o=s.cache,l=s.to,c=s.from;u.fn[i]=function(i){if(l&&!this[o]&&(this[o]=l(this._rgba)),i===e)return this[o].slice();var s,a=t.type(i),h="array"===a||"object"===a?i:arguments,p=this[o].slice();return d(r,function(t,e){var i=h["object"===a?t:e.idx];null==i&&(i=p[e.idx]),p[e.idx]=n(i,e)}),c?(s=u(c(p)),s[o]=p,s):u(p)},d(r,function(e,n){u.fn[e]||(u.fn[e]=function(s){var r,o=t.type(s),l="alpha"===e?this._hsla?"hsla":"rgba":i,u=this[l](),c=u[n.idx];return"undefined"===o?c:("function"===o&&(s=s.call(this,c),o=t.type(s)),null==s&&n.empty?this:("string"===o&&(r=a.exec(s),r&&(s=c+parseFloat(r[2])*("+"===r[1]?1:-1))),u[n.idx]=s,this[l](u)))})})}),u.hook=function(e){var n=e.split(" ");d(n,function(e,n){t.cssHooks[n]={set:function(e,s){var r,o,a="";if("transparent"!==s&&("string"!==t.type(s)||(r=i(s)))){if(s=u(r||s),!p.rgba&&1!==s._rgba[3]){for(o="backgroundColor"===n?e.parentNode:e;(""===a||"transparent"===a)&&o&&o.style;)try{a=t.css(o,"backgroundColor"),o=o.parentNode}catch(l){}s=s.blend(a&&"transparent"!==a?a:"_default")}s=s.toRgbaString()}try{e.style[n]=s}catch(l){}}},t.fx.step[n]=function(e){e.colorInit||(e.start=u(e.elem,n),e.end=u(e.end),e.colorInit=!0),t.cssHooks[n].set(e.elem,e.start.transition(e.end,e.pos))}})},u.hook(o),t.cssHooks.borderColor={expand:function(t){var e={};return d(["Top","Right","Bottom","Left"],function(n,i){e["border"+i+"Color"]=t}),e}},r=t.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),define("jquery.color",function(){}),define("core/sections/GroupPermissionsIndex",["require","jquery","common/BaseView","common/SpinPresets","jquery.color","jquery.spin"],function(t){var e=t("jquery"),n=t("common/BaseView"),i=t("common/SpinPresets");return t("jquery.color"),t("jquery.spin"),n.extend({el:".wasabi-core--grouppermissions-index",events:{"click .single-submit":"onSingleSubmit"},onSingleSubmit:function(t){t.preventDefault();var n=e(t.target);n.hide().blur().parent().spin(i.small),e.ajax({type:"post",url:this.$(".permissions-update-form").attr("action"),data:n.parent().parent().find("input").serialize(),dataType:"json",cache:!1,success:function(){var t=n.parent().parent(),i=n.parent().css("backgroundColor");n.parent().spin(!1),n.show(),t.find("td:not(.controller)").stop().css({backgroundColor:"#fff7d9"}).animate({backgroundColor:i},1e3,function(){e(this).css({backgroundColor:""})})}})}})}),define("core/views/MenuItemsList",["require","underscore","jquery","common/BaseView","common/SpinPresets","jquery.nSortable"],function(t){var e=t("underscore"),n=t("jquery"),i=t("common/BaseView"),s=t("common/SpinPresets");return t("jquery.nSortable"),i.extend({events:{"nSortable-change":"onSort"},section:{},menuItemsReorderUrl:!1,initialize:function(t){this.section=t.section,this.menuItemsReorderUrl=this.$el.attr("data-reorder-url"),this.$el.nSortable({handle:"a.move",tabWidth:20,placeholder:"sortable-placeholder",dataAttribute:"data-menu-item-id",maxDepth:parseInt(this.$el.attr("data-maximum-nesting-level")),serializeKey:"",serializeWrapKeys:!1,serializeParentIdNullable:!0,leftKey:"lft",rightKey:"rght",animateTarget:!1})},onSort:function(t,i){this.blockThis({backgroundColor:"#fff",spinner:s.large,deltaHeight:-1});var r=i.toArray();for(var o in r)if(r.hasOwnProperty(o)){var a=r[o],l=this.$el.find('li[data-menu-item-id="'+a.id+'"]').first().find("a.wicon-add").first();a.depth>2?l.addClass("hidden"):l.removeClass("hidden")}n.ajax({type:"post",dataType:"json",url:this.menuItemsReorderUrl,data:i.serialize(),cache:!1,success:e.bind(this.unblockThis,this)})}})}),define("core/sections/MenusEdit",["require","common/BaseView","wasabi","../views/MenuItemsList"],function(t){var e=t("common/BaseView"),n=t("wasabi"),i=t("../views/MenuItemsList");return e.extend({el:".wasabi-core--menus-edit",initialize:function(){n.createView(i,{el:this.$(".menu-items"),section:this})}})}),define("wasabi.core",["require","jquery","underscore","core/views/Menu","core/views/NavigationToggle","core/views/LangSwitch","core/views/Pagination","common/ModalView","wasabi","jquery.livequery","core/sections/LanguagesIndex","core/sections/GroupPermissionsIndex","core/sections/MenusEdit"],function(t){function e(){c.ajaxSetup({dataType:"json"}),c(y).ajaxSuccess(n).ajaxError(i)
}function n(t,e){if(200==e.status&&"OK"==e.statusText){var n=c.parseJSON(e.responseText)||{};"undefined"!=typeof n.status&&("undefined"!=typeof n.flash&&r(n.flash),"undefined"!=typeof n.redirect&&(v.location=n.redirect))}}function i(t,e){var n;401==e.status&&(n=c.parseJSON(e.responseText)||{},"undefined"!=typeof n.name&&(confirm(n.name),v.location.reload())),500==e.status&&(n=c.parseJSON(e.responseText)||{},"undefined"!=typeof n.name&&r({before:"div.title-pad","class":"error",message:n.name}))}function s(){function t(){var t=c("<div/>").css({width:"100px",height:"100px",overflow:"scroll",position:"absolute",top:"-9999px"}),e=c("body");t.prependTo(e);var n=0;return setTimeout(function(){n=t[0].offsetWidth-t[0].clientWidth},0),t.remove(),n}g.features.scrollbarWidth=t()}function r(t){var e=t.before||!1,n=t.after||!1,i=t.message,s=t["class"]?"flash-"+t["class"]:"flash-success",r=!1,o=c("<div/>").addClass(s).html(i);e?(r=c(e),r.prev("."+s).remove(),o.insertBefore(r)):n&&(r=c(n),r.next("."+s).remove(),o.insertAfter(r))}function o(){g.views.menu=g.createView(h),g.views.navigationToggle=g.createView(p),g.views.langSwitch=g.createView(f),g.views.paginations=g.createViews(c(".pagination"),d)}function a(){c("select").livequery(function(){c(this).toggleClass("empty",""===c(this).val()),c(this).change(function(){c(this).toggleClass("empty",""===c(this).val())})})}function l(){var t=this;g.views.modals=[],c('[data-toggle="modal"], [data-toggle="confirm"]').livequery(function(){g.views.modals.push(g.createView(m,{el:c(this),scrollbarWidth:g.features.scrollbarWidth,confirmYes:t.options.translations.confirmYes,confirmNo:t.options.translations.confirmNo}))})}function u(){this.$body.hasClass("wasabi-core--languages-index")&&g.createView(t("core/sections/LanguagesIndex")),this.$body.hasClass("wasabi-core--grouppermissions-index")&&g.createView(t("core/sections/GroupPermissionsIndex")),this.$body.hasClass("wasabi-core--menus-edit")&&g.createView(t("core/sections/MenusEdit"))}var c=t("jquery"),h=(t("underscore"),t("core/views/Menu")),p=t("core/views/NavigationToggle"),f=t("core/views/LangSwitch"),d=t("core/views/Pagination"),m=t("common/ModalView"),g=t("wasabi");t("jquery.livequery");var v=window,y=document;return{options:{},w:null,d:null,$html:null,$body:null,views:[],collections:[],models:[],resizeTimeout:0,components:{},initialize:function(t){this.options=t||{},this.w=v,this.d=y,this.$html=c("html"),this.$body=c("body"),e.call(this),s.call(this),o.call(this),a.call(this),l.call(this),u.call(this)}}});